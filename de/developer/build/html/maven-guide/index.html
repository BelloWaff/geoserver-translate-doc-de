
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Maven Guide &mdash; GeoServer 2.2.x Developer Manual</title>
  <link rel="stylesheet" href="../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x Developer Manual" href="../index.html" />
      <link rel="next" title="Eclipse Guide" href="../eclipse-guide/index.html" />
      <link rel="prev" title="Quickstart" href="../quickstart/index.html" />
</head>
<body class="maven-guide/index">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../index.html">GeoServer 2.2.x Developer Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoServer 2.2.x Developer Manual</a> &raquo;</li>
  <li>Maven Guide</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../eclipse-guide/index.html" title="Eclipse Guide"
       accesskey="N">next</a></li>
  <li>
    <a href="../quickstart/index.html" title="Quickstart"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="maven-guide">
<span id="id1"></span><h1>Maven Guide<a class="headerlink" href="#maven-guide" title="Permalink to this headline">¶</a></h1>
<p>A reference for building GeoServer with Maven.</p>
<div class="section" id="installing-maven">
<h2>Installing Maven<a class="headerlink" href="#installing-maven" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../tools.html#tools"><em>Tools</em></a>.</p>
</div>
<div class="section" id="running-maven">
<h2>Running Maven<a class="headerlink" href="#running-maven" title="Permalink to this headline">¶</a></h2>
<p>Maven provides a wide range of commands used to do everything from compiling a
module to generating test coverage reports. Most maven commands can be run from
the root the source tree, or from a particular module.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When attempting to run a maven command from the root of the source tree
remember to change directory from the root the checkout into the <tt class="docutils literal"><span class="pre">src</span></tt>
directory.</p>
</div>
</div></blockquote>
<p>When running a command from the root of the source tree, or from a directory
that contains other modules the command will be run for all modules. When
running the command from a single module, it is run only for that module.</p>
</div>
<div class="section" id="building">
<h2>Building<a class="headerlink" href="#building" title="Permalink to this headline">¶</a></h2>
<p>The most commonly maven command used with GeoServer is the install command:</p>
<div class="highlight-python"><pre>mvn clean install</pre>
</div>
<p>While the <tt class="docutils literal"><span class="pre">clean</span></tt> command is not necessary, it is recommented. Running this
command does the following:</p>
<blockquote>
<div><ul class="simple">
<li>compiles source code</li>
<li>runs unit tests</li>
<li>installs artifacts into the local maven repository</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="skipping-tests">
<h2>Skipping tests<a class="headerlink" href="#skipping-tests" title="Permalink to this headline">¶</a></h2>
<p>Often it is useful to skip unit tests when performing a build. Adding the flag
<tt class="docutils literal"><span class="pre">-DskipTests</span></tt> to the build command will only compile unit tests, but not run
them:</p>
<div class="highlight-python"><pre>mvn -DskipTests clean install</pre>
</div>
</div>
<div class="section" id="building-offline">
<h2>Building offline<a class="headerlink" href="#building-offline" title="Permalink to this headline">¶</a></h2>
<p>Maven automatically downloads dependencies declared by
modules being built. In the case of SNAPSHOT dependencies,
Maven downloads updates each time it performs the first build of the day.</p>
<p>GeoServer depends on SNAPSHOT versions of the GeoTools library.
The automatic download can result in lengthy build time
while Maven downloads updated GeoTools modules.
If GeoTools was built locally, these downloads are unecessary.</p>
<p>Also, if GeoTools is being modified locally, then the local versions
rather than SNAPSHOT versions of modules should be used.</p>
<p>This can be remedied by running maven in &#8220;offline mode&#8221;:</p>
<div class="highlight-python"><pre>mvn -o clean install</pre>
</div>
<p>In offline mode Maven will not download external dependencies,
and will not update SNAPSHOT dependencies.</p>
</div>
<div class="section" id="building-extensions">
<h2>Building extensions<a class="headerlink" href="#building-extensions" title="Permalink to this headline">¶</a></h2>
<p>By default, extensions are not included in the build. They are added to the
build explicitly via <a class="reference internal" href="#profiles"><em>profiles</em></a>. For example the following
command adds the <tt class="docutils literal"><span class="pre">restconfig</span></tt> extension to the build:</p>
<div class="highlight-python"><pre>mvn clean install -P restconfig</pre>
</div>
<p>Multiple extensions can be enabled simultaneously:</p>
<div class="highlight-python"><pre>mvn clean install -P restconfig,oracle</pre>
</div>
<p>A special profile named <tt class="docutils literal"><span class="pre">allExtensions</span></tt> enables all extensions:</p>
<div class="highlight-python"><pre>mvn clean install -P allExtensions</pre>
</div>
</div>
<div class="section" id="recover-build">
<span id="profiles"></span><h2>Recover Build<a class="headerlink" href="#recover-build" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">After fixing a test failure; you can &#8220;resume&#8221; from a specific point in the build:</p>
<div class="highlight-python"><pre>mvn install -rf extension/wps</pre>
</div>
</li>
<li><p class="first">Recover from a 301 Redirect</p>
<p>A long standing bug in Maven from 2.0.10 handling of 301 errors when a artifact has been moved.
The work around is to run Maven with the option:</p>
<div class="highlight-python"><pre>mvn install -Dmaven.wagon.provider.http=httpclient</pre>
</div>
<p>This is not a common issue.</p>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2>Profiles<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Additional profiles are defined in the pom.xml files providing optional build steps. Profiles are directly enabled with the -P flag, others are automatically activated based on platform used or a -D property being defined.</p>
<p>To build the release module as part of your build:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span><span class="n">Drelease</span>
</pre></div>
</div>
<p>To include remote tests:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span><span class="n">PremoteOwsTests</span>
</pre></div>
</div>
<p>Profiles are also used manage optional extensions community plugins:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span><span class="n">Pproxy</span>
<span class="o">-</span><span class="n">Poracle</span>
<span class="o">-</span><span class="n">Pupload</span>
<span class="o">-</span><span class="n">Pwps</span>
</pre></div>
</div>
<p>Additional profiles are defined in the pom.xml files providing optional build steps. Profiles are directly enabled with the -P flag, others are automatically activated based on platform used or a -D property being defined.</p>
<p>To build javadocs with UML graph:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span><span class="n">Duml</span>
</pre></div>
</div>
<p>To build the release module as part of your build:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span><span class="n">Drelease</span>
</pre></div>
</div>
<p>To include the legacy moduled:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span><span class="n">Plegacy</span>
</pre></div>
</div>
<p>To include remote tests:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span><span class="n">PremoteOwsTests</span>
</pre></div>
</div>
<p>Profiles are also used manage several of the optional community plugins:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span><span class="n">Pupload</span>
<span class="o">-</span><span class="n">Pwps</span>
<span class="o">-</span><span class="n">Pproxy</span>
</pre></div>
</div>
</div>
<div class="section" id="eclipse">
<h2>Eclipse<a class="headerlink" href="#eclipse" title="Permalink to this headline">¶</a></h2>
<p>The maven eclipse plugin is used to generate eclipse projects for a set of
modules:</p>
<div class="highlight-python"><pre>mvn eclipse:eclipse</pre>
</div>
<p>After which the modules can be imported into an eclipse workspace.</p>
<p>A useful feature of the plugin is the ability to download associated source code
for third party dependencies. This is done with the <tt class="docutils literal"><span class="pre">downloadSources</span></tt> flag:</p>
<div class="highlight-python"><pre>mvn -DdownloadSources eclipse:eclipse</pre>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The first time you enable the <tt class="docutils literal"><span class="pre">downloadSources</span></tt> flag the build will take a
long time as it will attempt to download the sources for every single library
GeoServer depends on.</p>
</div>
</div>
<div class="section" id="building-the-web-module">
<h2>Building the web module<a class="headerlink" href="#building-the-web-module" title="Permalink to this headline">¶</a></h2>
<p>When the <tt class="docutils literal"><span class="pre">web</span></tt> module is installed, it does so with a particular configuration
built in. By default this is the <tt class="docutils literal"><span class="pre">minimal</span></tt> configuration. However this can be
customized to build in any configuration via the <tt class="docutils literal"><span class="pre">configId</span></tt> and
<tt class="docutils literal"><span class="pre">configDirectory</span></tt> flags. For example:</p>
<div class="highlight-python"><pre>mvn clean install -DconfigId=release -DconfigDirectory=/home/jdeolive/geoserver_1.7.x/data</pre>
</div>
<p>The above command builds the web module against the release configuration that
is shipped with GeoServer. The <tt class="docutils literal"><span class="pre">configId</span></tt> is the name of the configuration
directory to include, and the <tt class="docutils literal"><span class="pre">configDirectory</span></tt> is the parent directory of the
configuration directory to include. The <tt class="docutils literal"><span class="pre">configDirectory</span></tt> can either be
specified as an absolute path like in the above example, or it can be specified
relative to the web module itself:</p>
<div class="highlight-python"><pre>mvn clean install -DconfigId=release -DconfigDirectory=../../../data</pre>
</div>
<p>The above command does the same as the first, however references the
configDirectory relative to the web module. This path, <tt class="docutils literal"><span class="pre">../../../data</span></tt>, can be
used if the GeoServer checkout has the standard layout.</p>
</div>
<div class="section" id="running-the-web-module-with-jetty">
<h2>Running the web module with Jetty<a class="headerlink" href="#running-the-web-module-with-jetty" title="Permalink to this headline">¶</a></h2>
<p>The maven jetty plugin can be used to run modules which are web based in an
embedded Jetty container:</p>
<div class="highlight-python"><pre>cd geoserver_2.0.x/src/web/app
mvn jetty:run</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command must be run from the web/app module, it will fail if run from
elsewhere.</p>
</div>
<p>The above command will run GeoServer with the built in data directory. To
specify a different data directory the <tt class="docutils literal"><span class="pre">GEOSERVER_DATA_DIR</span></tt> flag is used:</p>
<div class="highlight-python"><pre>mvn -DGEOSERVER_DATA_DIR=/path/to/datadir jetty:run</pre>
</div>
</div>
<div class="section" id="installing-the-oracle-module">
<h2>Installing the Oracle module<a class="headerlink" href="#installing-the-oracle-module" title="Permalink to this headline">¶</a></h2>
<p>To configure GeoServer to include the Oracle datastore extension module, do the following:</p>
<p>Obtain the appropriate Oracle JDBC driver (possibly by downloading from Oracle).
Install it in the Maven repository using the command:</p>
<div class="highlight-python"><pre>mvn install:install-file -Dfile=ojdbc14.jar -DgroupId=com.oracle -DartifactId=ojdbc14 -Dversion=10.2.0.3.0 -Dpackaging=jar -DgeneratePom=true</pre>
</div>
<p>Configure the Eclipse project using:</p>
<div class="highlight-python"><pre>mvn -o -P oracle,oracleDriver eclipse:eclipse</pre>
</div>
<p>(The <tt class="docutils literal"><span class="pre">oracle</span></tt> profile includes the GeoServer Oracle module,
while the <tt class="docutils literal"><span class="pre">oracleDriver</span></tt> profile includes the proprietary Oracle JDBC driver.
These are separate because there are situations where
the Oracle JDBC JAR should not be included with the build.)</p>
<p>Finally, in Eclipse import the <tt class="docutils literal"><span class="pre">oracle</span></tt> module project.
Refresh the <tt class="docutils literal"><span class="pre">web-app</span></tt> project to configure the dependency on the <tt class="docutils literal"><span class="pre">oracle</span></tt> project.</p>
<p>When GeoServer is run, Oracle should be provided as a <strong>Vector Data Source</strong> on the <em>New Data source</em> page</p>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="../quickstart/index.html" title="previous chapter">Quickstart</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="../eclipse-guide/index.html" title="next chapter">Eclipse Guide</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Maven Guide</a><ul>
<li><a class="reference internal" href="#installing-maven">Installing Maven</a></li>
<li><a class="reference internal" href="#running-maven">Running Maven</a></li>
<li><a class="reference internal" href="#building">Building</a></li>
<li><a class="reference internal" href="#skipping-tests">Skipping tests</a></li>
<li><a class="reference internal" href="#building-offline">Building offline</a></li>
<li><a class="reference internal" href="#building-extensions">Building extensions</a></li>
<li><a class="reference internal" href="#recover-build">Recover Build</a></li>
<li><a class="reference internal" href="#id2">Profiles</a></li>
<li><a class="reference internal" href="#eclipse">Eclipse</a></li>
<li><a class="reference internal" href="#building-the-web-module">Building the web module</a></li>
<li><a class="reference internal" href="#running-the-web-module-with-jetty">Running the web module with Jetty</a></li>
<li><a class="reference internal" href="#installing-the-oracle-module">Installing the Oracle module</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="../quickstart/index.html" title="previous chapter">Quickstart</a></li>
            <li>Next: <a href="../eclipse-guide/index.html" title="next chapter">Eclipse Guide</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../_sources/maven-guide/index.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2011 GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>