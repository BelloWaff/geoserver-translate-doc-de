
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Implementing a WPS Service &mdash; GeoServer 2.2.x Developer Manual</title>
  <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x Developer Manual" href="../../index.html" />
      <link rel="up" title="WPS Services" href="index.html" />
      <link rel="next" title="Versioning" href="../versioning/index.html" />
      <link rel="prev" title="WPS design guide" href="design-guide.html" />
</head>
<body class="programming-guide/wps-services/implementing">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.2.x Developer Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.2.x Developer Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Programming Guide</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">WPS Services</a> &raquo;</li>
  <li>Implementing a WPS Service</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../versioning/index.html" title="Versioning"
       accesskey="N">next</a></li>
  <li>
    <a href="design-guide.html" title="WPS design guide"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="implementing-a-wps-service">
<span id="wps-services-implementing"></span><h1>Implementing a WPS Service<a class="headerlink" href="#implementing-a-wps-service" title="Permalink to this headline">¶</a></h1>
<p>This section describes how to implement a WPS service in GeoServer, using
a &#8220;Hello World&#8221; example. The service is designed to be extremely simple,
taking a single parameter and returning text. It is meant to show the
developer how to put together all the pieces necessary to build a WPS
service on top of GeoServer</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Before being able to proceed, GeoServer must be built on the local system. See
the <a class="reference internal" href="../../source.html#source"><em>Source Code</em></a> and <a class="reference internal" href="../../quickstart/index.html#quickstart"><em>Quickstart</em></a> sections for details. In addition to these,
GeoServer must be built with WPS support as described in the
<a class="reference internal" href="../../maven-guide/index.html#maven-guide"><em>Maven Guide</em></a> section, make sure it is built with the <tt class="docutils literal"><span class="pre">-Pwps</span></tt> profile</p>
<p>You can also create a custom WPS module and deploy it into an existing GeoServer
with the WPS extension already deployed into it.</p>
</div>
<div class="section" id="create-a-new-module">
<h2>Create a new module<a class="headerlink" href="#create-a-new-module" title="Permalink to this headline">¶</a></h2>
<p>In order to create a new WPS plug-in the first step is to create a custom Maven project.
The project will be called &#8220;hello_wps&#8221;.</p>
<ol class="arabic simple">
<li>Create a new directory named <tt class="docutils literal"><span class="pre">hello_wps</span></tt> somewhere on the file system.</li>
<li>Add the following <tt class="docutils literal"><span class="pre">pom.xml</span></tt> to the root of the new module, inside the hello_wps directory:</li>
</ol>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0</span>
<span class="s">    http://maven.apache.org/maven-v4_0_0.xsd &quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

   <span class="nt">&lt;groupId&gt;</span>org.geoserver<span class="nt">&lt;/groupId&gt;</span>
   <span class="nt">&lt;artifactId&gt;</span>hello_wps<span class="nt">&lt;/artifactId&gt;</span>
   <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
   <span class="nt">&lt;version&gt;</span>2.2-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
   <span class="nt">&lt;name&gt;</span>hello_wps<span class="nt">&lt;/name&gt;</span>
   <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.geotools<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>gt-process<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>8-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
       <span class="nt">&lt;groupId&gt;</span>org.geoserver<span class="nt">&lt;/groupId&gt;</span>
       <span class="nt">&lt;artifactId&gt;</span>main<span class="nt">&lt;/artifactId&gt;</span>
       <span class="nt">&lt;version&gt;</span>2.2-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
       <span class="nt">&lt;classifier&gt;</span>tests<span class="nt">&lt;/classifier&gt;</span>
       <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
     <span class="nt">&lt;/dependency&gt;</span>
     <span class="nt">&lt;dependency&gt;</span>
       <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
       <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
       <span class="nt">&lt;version&gt;</span>3.8.1<span class="nt">&lt;/version&gt;</span>
       <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
     <span class="nt">&lt;/dependency&gt;</span>
     <span class="nt">&lt;dependency&gt;</span>
       <span class="nt">&lt;groupId&gt;</span>com.mockrunner<span class="nt">&lt;/groupId&gt;</span>
       <span class="nt">&lt;artifactId&gt;</span>mockrunner<span class="nt">&lt;/artifactId&gt;</span>
       <span class="nt">&lt;version&gt;</span>0.3.1<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
     <span class="nt">&lt;/dependency&gt;</span>
   <span class="nt">&lt;/dependencies&gt;</span>

   <span class="nt">&lt;build&gt;</span>
     <span class="nt">&lt;plugins&gt;</span>
       <span class="nt">&lt;plugin&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
         <span class="nt">&lt;configuration&gt;</span>
           <span class="nt">&lt;source&gt;</span>1.5<span class="nt">&lt;/source&gt;</span>
           <span class="nt">&lt;target&gt;</span>1.5<span class="nt">&lt;/target&gt;</span>
         <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
   <span class="nt">&lt;/build&gt;</span>

   <span class="nt">&lt;repositories&gt;</span>
     <span class="nt">&lt;repository&gt;</span>
       <span class="nt">&lt;id&gt;</span>opengeo<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>opengeo<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;url&gt;</span>http://repo.opengeo.org<span class="nt">&lt;/url&gt;</span>
     <span class="nt">&lt;/repository&gt;</span>
   <span class="nt">&lt;/repositories&gt;</span>

<span class="nt">&lt;/project&gt;</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic">
<li><p class="first">Create the directory <tt class="docutils literal"><span class="pre">src/main/java</span></tt> under the root of the new module:</p>
<div class="highlight-python"><pre>[hello_wps]% mkdir -p src/main/java</pre>
</div>
<p>The project that was just created should have the following structure:</p>
<div class="highlight-python"><pre>hello_wps/
 + pom.xml
  + src/
    + main/
      + java/</pre>
</div>
</li>
</ol>
</div>
<div class="section" id="create-the-process-class">
<h2>Create the process class<a class="headerlink" href="#create-the-process-class" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Create the package that will contain your custom WPS process</p>
<p>Package naming plays an important role in creating a WPS process. The rightmost
part of the package name will be the namespace for the WPS process being created.
Create a package named <tt class="docutils literal"><span class="pre">org.geoserver.wps.gs</span></tt> inside the <em>src/main/java</em> directory
structure. The namespace for the new WPS process will be <tt class="docutils literal"><span class="pre">gs</span></tt>.</p>
</li>
<li><p class="first">Create the Java class that will expose your custom WPS process</p>
<p>Create a Java class called HelloWPS.java inside the previous package:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">org.geotools.process.factory.DescribeParameter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.geotools.process.factory.DescribeProcess</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.geotools.process.factory.DescribeResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.geotools.process.gs.GSProcess</span><span class="o">;</span>

<span class="nd">@DescribeProcess</span><span class="o">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;helloWPS&quot;</span><span class="o">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&quot;Hello WPS Sample&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWPS</span> <span class="kd">implements</span> <span class="n">GSProcess</span> <span class="o">{</span>

   <span class="nd">@DescribeResult</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;result&quot;</span><span class="o">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&quot;output result&quot;</span><span class="o">)</span>
   <span class="kd">public</span> <span class="n">String</span> <span class="nf">execute</span><span class="o">(</span><span class="nd">@DescribeParameter</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&quot;name to return&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">return</span> <span class="s">&quot;Hello, &quot;</span> <span class="o">+</span> <span class="n">name</span><span class="o">;</span>
   <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="register-process-with-geoserver">
<h2>Register process with GeoServer<a class="headerlink" href="#register-process-with-geoserver" title="Permalink to this headline">¶</a></h2>
<p>GeoServer uses the <a class="reference external" href="http://www.springsource.org/spring-framework/">Spring Framework</a> to manage instantiation of its different components. We are going to
use the same mechanism to make this service discoverable by telling GeoServer to include its functionality
when it starts.</p>
<ol class="arabic">
<li><p class="first">Create the directory <tt class="docutils literal"><span class="pre">src/main/resources</span></tt> under the root of the new module:</p>
<div class="highlight-python"><pre>[hello_wps]% mkdir -p src/main/resources</pre>
</div>
<p>The project should have the following directory structure:</p>
<div class="highlight-python"><pre>hello_wps/
 + pom.xml
  + src/
    + main/
      + java/
      + resources/</pre>
</div>
</li>
<li><p class="first">Create an <tt class="docutils literal"><span class="pre">applicationContext.xml</span></tt> in the <tt class="docutils literal"><span class="pre">src/main/resources</span></tt> directory with the following contents:</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
  <span class="cp">&lt;!DOCTYPE beans PUBLIC &quot;-//SPRING//DTD BEAN//EN&quot; &quot;http://www.springframework.org/dtd/spring-beans.dtd&quot;&gt;</span>
  <span class="nt">&lt;beans&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;helloWPS&quot;</span> <span class="na">class=</span><span class="s">&quot;org.geoserver.wps.gs.HelloWPS&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/beans&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="build-deploy-and-test">
<h2>Build, deploy and test<a class="headerlink" href="#build-deploy-and-test" title="Permalink to this headline">¶</a></h2>
<p>In order to build your custom process, run the following command from the root of your project:</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span class="go">mvn clean install</span>
</pre></div>
</div>
</div></blockquote>
<p>This will clean previous runs, compile your code, and create a JAR file in the target directory.
The JAR file name is controlled by the name and version given to the project upon creation
(hello_wps-2.2-SNAPSHOT.jar in this example).</p>
<p>To deploy your module, copy this JAR file inside the <tt class="docutils literal"><span class="pre">/WEB-INF/lib</span></tt> directory of GeoServer and then restart it.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For alternative deployment options (i.e. running from source), see the <em>Trying it out</em>
section inside <a class="reference internal" href="../ows-services/implementing.html#ows-services-implementing"><em>Implementing a simple OWS service</em></a></p>
</div>
</div></blockquote>
<p>Once GeoServer is running again, you can verify that the new process was deployed successfully by running
the WPS Request Builder. The WPS Request Builder is a utility that can run tests of existing WPS processes
through the UI. You can access this utility by navigating to the WPS Request Builder inside the Demos
section of the GeoServer Web Admin Interface.</p>
<p>Once in the WPS request builder, select the process called gs:helloWPS from the <strong>Choose process</strong> dropdown.
The request builder will generate the necessary interface to be able to test the process, based on the
parameters and expected outputs described in the capabilities of the process.</p>
<p>The following image show an example of the WPS Request Builder running the helloWPS process, enter the
desired parameter and click on <strong>Execute process</strong> to run it. A window with the expected result should appear.</p>
<blockquote>
<div><div class="figure">
<img alt="../../_images/helloWPS.png" src="../../_images/helloWPS.png" />
<p class="caption"><em>WPS Request Builder</em></p>
</div>
</div></blockquote>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="design-guide.html" title="previous chapter">WPS design guide</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="../versioning/index.html" title="next chapter">Versioning</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Implementing a WPS Service</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#create-a-new-module">Create a new module</a></li>
<li><a class="reference internal" href="#create-the-process-class">Create the process class</a></li>
<li><a class="reference internal" href="#register-process-with-geoserver">Register process with GeoServer</a></li>
<li><a class="reference internal" href="#build-deploy-and-test">Build, deploy and test</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="design-guide.html" title="previous chapter">WPS design guide</a></li>
            <li>Next: <a href="../versioning/index.html" title="next chapter">Versioning</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../../_sources/programming-guide/wps-services/implementing.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2011 GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>