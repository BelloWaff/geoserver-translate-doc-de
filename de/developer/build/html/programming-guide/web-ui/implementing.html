
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Implementing a Wicket UI Extension &mdash; GeoServer 2.2.x Developer Manual</title>
  <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x Developer Manual" href="../../index.html" />
      <link rel="up" title="Web User Interface" href="index.html" />
      <link rel="next" title="Wicket Development In GeoServer" href="../wicket-pages/index.html" />
      <link rel="prev" title="Overview" href="overview.html" />
</head>
<body class="programming-guide/web-ui/implementing">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.2.x Developer Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.2.x Developer Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Programming Guide</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Web User Interface</a> &raquo;</li>
  <li>Implementing a Wicket UI Extension</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../wicket-pages/index.html" title="Wicket Development In GeoServer"
       accesskey="N">next</a></li>
  <li>
    <a href="overview.html" title="Overview"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="implementing-a-wicket-ui-extension">
<span id="wicket-ui-implementing"></span><h1>Implementing a Wicket UI Extension<a class="headerlink" href="#implementing-a-wicket-ui-extension" title="Permalink to this headline">¶</a></h1>
<p>This section describes how to implement an extension to the GeoServer Wicket
user interface. The extension will be extremely simple and will be a basic page
that is linked from the main menu and displays the message &#8220;Hello World&#8221;.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Before being able to proceed, GeoServer must be built on the local system. See
the <a class="reference internal" href="../../source.html#source"><em>Source Code</em></a> and <a class="reference internal" href="../../quickstart/index.html#quickstart"><em>Quickstart</em></a> sections for details.</p>
</div>
<div class="section" id="create-a-new-module">
<h2>Create a new module<a class="headerlink" href="#create-a-new-module" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Create a new module named <tt class="docutils literal"><span class="pre">hello_web</span></tt> somewhere on the file system</p>
</li>
<li><p class="first">Add the following <tt class="docutils literal"><span class="pre">pom.xml</span></tt> to the root of the new module:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span>
   <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
   <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd &quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

  <span class="nt">&lt;parent&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.geoserver<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>web<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.2-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/parent&gt;</span>

  <span class="nt">&lt;groupId&gt;</span>org.geoserver<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>hello_web<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;name&gt;</span>hello_web<span class="nt">&lt;/name&gt;</span>

  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.geoserver.web<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>web-core<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>2.2-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>

  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;source&gt;</span>1.5<span class="nt">&lt;/source&gt;</span>
          <span class="nt">&lt;target&gt;</span>1.5<span class="nt">&lt;/target&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
     <span class="nt">&lt;/plugin&gt;</span>
   <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>

<span class="nt">&lt;/project&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Create the directory <tt class="docutils literal"><span class="pre">src/main/java</span></tt> under the root of the new module:</p>
<div class="highlight-python"><pre>[hello_web]% mkdir -p src/main/java</pre>
</div>
</li>
</ol>
</div>
<div class="section" id="create-the-page-class">
<h2>Create the page class<a class="headerlink" href="#create-the-page-class" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">The class <tt class="docutils literal"><span class="pre">org.geoserver.web.GeoServerBasePage</span></tt> is the base class for all
pages in GeoServer. Create a new class called <tt class="docutils literal"><span class="pre">HelloPage</span></tt> in the package
<tt class="docutils literal"><span class="pre">org.geoserver.helloweb</span></tt>, which extends from <tt class="docutils literal"><span class="pre">GeoServerBasePage</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">geoserver</span><span class="o">.</span><span class="na">helloweb</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.geoserver.web.GeoServerBasePage</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloPage</span> <span class="kd">extends</span> <span class="n">GeoServerBasePage</span> <span class="o">{</span>

<span class="o">}</span>
</pre></div>
</div>
</li>
<li><p class="first">The first task is to implement the constructor. In Wicket a page or component
builds itself in its constructor. This page is basic and will simply create
a label which has the value &#8220;Hello World!&#8221;:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">org.apache.wicket.markup.html.basic.Label</span><span class="o">;</span>
<span class="o">...</span>

   <span class="kd">public</span> <span class="nf">HelloPage</span><span class="o">()</span> <span class="o">{</span>
       <span class="n">add</span><span class="o">(</span> <span class="k">new</span> <span class="n">Label</span><span class="o">(</span> <span class="s">&quot;hellolabel&quot;</span><span class="o">,</span> <span class="s">&quot;Hello World!&quot;</span><span class="o">)</span> <span class="o">);</span>
   <span class="o">}</span>
</pre></div>
</div>
<p>In the above code, an instance of <tt class="docutils literal"><span class="pre">Label</span></tt> is created. The first argument
to its constructor is the <strong>component id</strong>. In Wicket every component must
have an id. In the next section this id will be used to bind the component to
its HTML presentation. The second argument to the <tt class="docutils literal"><span class="pre">Label</span></tt> constructor is
the value of the world, in this case the string &#8220;Hello World!&#8221;</p>
</li>
</ol>
</div>
<div class="section" id="create-the-page-presentation">
<h2>Create the page presentation<a class="headerlink" href="#create-the-page-presentation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">With the page completed, the next step is to create the HTML presentation for
the page. To do this create a file named <tt class="docutils literal"><span class="pre">HelloPage.html</span></tt> in the same
directory as the <tt class="docutils literal"><span class="pre">HelloPagejava</span></tt> class:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;body&gt;</span>
     <span class="nt">&lt;wicket:extend&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">wicket:id=</span><span class="s">&quot;hellolabel&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
     <span class="nt">&lt;/wicket:extend&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>There are few things to note about the HTML. The first is the use of the
<tt class="docutils literal"><span class="pre">&lt;wicket:extend&gt;</span></tt> element. This tells wicket that <tt class="docutils literal"><span class="pre">HelloPage</span></tt> is an
extension of another page, in this case <tt class="docutils literal"><span class="pre">GeoServerBasePage</span></tt>, and it should
inherit presentation from that page.</p>
<p>The second thing to note is the attribute <tt class="docutils literal"><span class="pre">wicket:id</span></tt> on the <tt class="docutils literal"><span class="pre">&lt;div&gt;</span></tt>
element. This is what binds the <tt class="docutils literal"><span class="pre">&lt;div&gt;</span></tt> tag to the <tt class="docutils literal"><span class="pre">Label</span></tt> component
created in the previous section. The value of <tt class="docutils literal"><span class="pre">wicket:id</span></tt> must match the
id given to the component, in this case &#8220;hellolabel&#8221;.</p>
</li>
</ol>
</div>
<div class="section" id="create-the-i18n-file">
<h2>Create the i18n file<a class="headerlink" href="#create-the-i18n-file" title="Permalink to this headline">¶</a></h2>
<p>With Wicket (and any web application framework), any string that appears in the
web application should be interationalized. In GeoServer, this is performed by
creating an internationalization (i18n) file named
<tt class="docutils literal"><span class="pre">GeoServerApplication.properties</span></tt>.</p>
<ol class="arabic">
<li><p class="first">Create the directory <tt class="docutils literal"><span class="pre">src/main/resources</span></tt> under the root of the
<tt class="docutils literal"><span class="pre">hello_web</span></tt> module:</p>
<div class="highlight-python"><pre>[hello_web]% mkdir -p src/main/resources</pre>
</div>
</li>
<li><p class="first">Create the (i18n) file <tt class="docutils literal"><span class="pre">GeoServerApplication.properties</span></tt> in the <tt class="docutils literal"><span class="pre">src/main/resources</span></tt> directory:</p>
<div class="highlight-python"><pre>HelloPage.page.title=Hello
HelloPage.page.description=A page to say hello

HelloPage.title=Hello Page Title
HelloPage.description=This is the description of the page</pre>
</div>
<p>The first two keys in the above i18n file declare the title of the page and the description
of the page. This will be the title of the link to the page and the tooltip for the page link.
The next two keys are the title and description that are displayed on the page itself.</p>
</li>
</ol>
</div>
<div class="section" id="create-the-application-context">
<h2>Create the application context<a class="headerlink" href="#create-the-application-context" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">The final step is to create an application context which tells GeoServer
about the page created in the previous section. Add the following
<tt class="docutils literal"><span class="pre">applicationContext.xml</span></tt> file to the <tt class="docutils literal"><span class="pre">src/main/java</span></tt> directory, under the root
of the <tt class="docutils literal"><span class="pre">hello_web</span></tt> module:</p>
<div class="highlight-xml"><div class="highlight"><pre> <span class="cp">&lt;!DOCTYPE beans PUBLIC &quot;-//SPRING//DTD BEAN//EN&quot; &quot;http://www.springframework.org/dtd/spring-beans.dtd&quot;&gt;</span>

 <span class="nt">&lt;beans&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;helloPage&quot;</span> <span class="na">class=</span><span class="s">&quot;org.geoserver.web.MenuPageInfo&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">value=</span><span class="s">&quot;helloPage&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;titleKey&quot;</span> <span class="na">value=</span><span class="s">&quot;HelloPage.page.title&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;descriptionKey&quot;</span> <span class="na">value=</span><span class="s">&quot;HelloPage.page.description&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;componentClass&quot;</span> <span class="na">value=</span><span class="s">&quot;org.geoserver.helloweb.HelloPage&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</pre></div>
</div>
<p>The above bean declaration declares an instance of the <tt class="docutils literal"><span class="pre">MenuPageInfo</span></tt> class
which is a descriptor for pages linked from the main page of the GeoServer
web application. The property <tt class="docutils literal"><span class="pre">titleKey</span></tt> is the title of the page and it
receives the value of the title i18n key created in the previous section.
Similar for the the <tt class="docutils literal"><span class="pre">descriptionKey</span></tt> property.</p>
</li>
</ol>
</div>
<div class="section" id="test-the-extension">
<h2>Test the extension<a class="headerlink" href="#test-the-extension" title="Permalink to this headline">¶</a></h2>
<p>At this point, the <tt class="docutils literal"><span class="pre">hello_web</span></tt> module should look like the following:</p>
<div class="highlight-python"><pre>hello_web/
   pom.xml
   src/main/resources
       GeoServerApplication.properties
   src/main/java
       applicationContext.xml
       org/geoserver/helloweb/
            HelloPage.java
            HelloPage.html</pre>
</div>
<ol class="arabic">
<li><p class="first">Build the <tt class="docutils literal"><span class="pre">hello_web</span></tt> module:</p>
<div class="highlight-python"><pre>[hello_web]% mvn install</pre>
</div>
</li>
<li><p class="first">Copy the <tt class="docutils literal"><span class="pre">hello_web-1.0-SNAPSHOT.jar</span></tt> file from the  <tt class="docutils literal"><span class="pre">hello_web/target</span></tt>
directory into the <tt class="docutils literal"><span class="pre">WEB-inf/lib</span></tt> directory of a GeoServer installation:</p>
<div class="highlight-python"><pre>[hello_web]% cp target/hello-1.0-SNAPSHOT.jar /home/bob/geoserver-2.0/webapps/geoserver/WEB-INF/lib</pre>
</div>
</li>
<li><p class="first">Start or restart GeoServer</p>
</li>
<li><p class="first">Navigate to <a class="reference external" href="http://localhost:8080/geoserver/web">http://localhost:8080/geoserver/web</a></p>
</li>
</ol>
<p>Upon success a link titled <tt class="docutils literal"><span class="pre">Hello</span></tt> should appear in the menu on the left side
of the main GeoServer page. Following the link brings up the <tt class="docutils literal"><span class="pre">HelloPage</span></tt></p>
<blockquote>
<div><img alt="../../_images/test.jpg" src="../../_images/test.jpg" />
</div></blockquote>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="overview.html" title="previous chapter">Overview</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="../wicket-pages/index.html" title="next chapter">Wicket Development In GeoServer</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Implementing a Wicket UI Extension</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#create-a-new-module">Create a new module</a></li>
<li><a class="reference internal" href="#create-the-page-class">Create the page class</a></li>
<li><a class="reference internal" href="#create-the-page-presentation">Create the page presentation</a></li>
<li><a class="reference internal" href="#create-the-i18n-file">Create the i18n file</a></li>
<li><a class="reference internal" href="#create-the-application-context">Create the application context</a></li>
<li><a class="reference internal" href="#test-the-extension">Test the extension</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="overview.html" title="previous chapter">Overview</a></li>
            <li>Next: <a href="../wicket-pages/index.html" title="next chapter">Wicket Development In GeoServer</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../../_sources/programming-guide/web-ui/implementing.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2011 GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>