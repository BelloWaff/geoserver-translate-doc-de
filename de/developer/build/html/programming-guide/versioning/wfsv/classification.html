
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Versioning WFS - Versioning approaches classification &mdash; GeoServer 2.2.x Developer Manual</title>
  <link rel="stylesheet" href="../../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x Developer Manual" href="../../../index.html" />
      <link rel="up" title="Versioning" href="../index.html" />
      <link rel="next" title="Versioning implementations" href="implementations.html" />
      <link rel="prev" title="WFS versioning requirement specification" href="requirements.html" />
</head>
<body class="programming-guide/versioning/wfsv/classification">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../../index.html">GeoServer 2.2.x Developer Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../../../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../../index.html">GeoServer 2.2.x Developer Manual</a> &raquo;</li>
  <li><a href="../../index.html" accesskey="U">Programming Guide</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Versioning</a> &raquo;</li>
  <li>Versioning WFS - Versioning approaches classification</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="implementations.html" title="Versioning implementations"
       accesskey="N">next</a></li>
  <li>
    <a href="requirements.html" title="WFS versioning requirement specification"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="versioning-wfs-versioning-approaches-classification">
<span id="versioning-classification"></span><h1>Versioning WFS - Versioning approaches classification<a class="headerlink" href="#versioning-wfs-versioning-approaches-classification" title="Permalink to this headline">¶</a></h1>
<p>It&#8217;s quite clear that the requirements for a Versioning WFS sum up to building a full fledged version control system for features, although we may want to find ways to implement it step by step. So, it may be helpful to compare different approaches at tackling some of the implementation aspects of a version control system.</p>
<div class="section" id="difference-handling">
<h2>Difference handling<a class="headerlink" href="#difference-handling" title="Permalink to this headline">¶</a></h2>
<p>Given two revisions of the same feature, how do you store the difference between them?</p>
<ul class="simple">
<li><strong>Copy</strong>: we have two integral copies of the features</li>
<li><strong>Diff</strong>: only the differences are stored. There may be multiple ways to do so:
* keeping a map of xpath/old value for every changed attribute
* encoding the two revisions in GML, and do a text diff between them
* keeping a map of xpath -&gt; diff, where the difference of each attribute is encoded as a text difference (less tags around, and less context...), or as a binary difference (serialize the attribute, and then diff the byte arrays?)</li>
<li><strong>Adaptive</strong>, try diff, revert to copy if diff does not provide any space benefit.</li>
</ul>
<p>Copy has the advantage of speed, getting a certain revision is just a matter of selection, whilst patch may use less space, especially if the feature is big, but requires both the selection of patches and their application to the integral data copy we have somewhere (how the integral data copy is managed is discussed in another part of this document).</p>
<p>For a comparison of different diff computation algorithms, see: &#8220;An Empirical Study of Delta Algorithms&#8221;.</p>
</div>
<div class="section" id="versioning-direction-and-integral-copies">
<h2>Versioning direction and integral copies<a class="headerlink" href="#versioning-direction-and-integral-copies" title="Permalink to this headline">¶</a></h2>
<p>Do we keep backwards or forward changes?</p>
<ul class="simple">
<li><strong>Backward changes</strong>: the last revision is an integral copy, going backwards means applying one or more reverse patches (this is the svn, cvs approach);</li>
<li><strong>Forward changes</strong>: we do start from an integral copy (eventually an empty data set), and register normal patches to store the differences.</li>
</ul>
<p>Were do you have the states that differences refer to in order to build another revision of data?</p>
<ul class="simple">
<li><strong>last revision</strong> of each trunk/branch/tag</li>
<li><strong>in the root</strong> of the versioning tree</li>
</ul>
<p>Backward changes ensures fast access to the last revision, forward changes allows to handle multiple branches of data in a more natural way, because revisions can be thought as a tree starting with a single root (so a branch is just recorded as a set of forward changes from the common point where it branched off).</p>
<p>Backwards changes need last revision integral copies, whilst forward changes do need at least an integral copy in the root of the versioning tree.</p>
<p>Forward changes calls for fast to compute differences in order to get decent speed on the common case. ArcSDE uses forward changes coupled with difference by copy approach and integral copy in the root. Svn and csv use backward changes coupled with diffs and integral copy as the last revision.</p>
</div>
<div class="section" id="branches-and-tags-management">
<h2>Branches and tags management<a class="headerlink" href="#branches-and-tags-management" title="Permalink to this headline">¶</a></h2>
<p>Are these special beasts, or does the data structure seamlessly handle those too?</p>
<ul class="simple">
<li>no special management in SVN and ArcSDE, the same data structure rules them all;</li>
<li>as an extra structure on top of the base with CVS (attic and file infos).</li>
</ul>
<p>In the ArcSDE case, forward changes provide a natural fit to handle whatever trunk &#8220;copy&#8221; you may think of, branches and tags are really the same. The same goes for SVN.</p>
<p>If would be nice to have the same conceptual ease.</p>
</div>
<div class="section" id="space-management">
<h2>Space management<a class="headerlink" href="#space-management" title="Permalink to this headline">¶</a></h2>
<p>How do we manage space and speed up a bogged down versioning server?</p>
<ul class="simple">
<li>by removing unneeded tags, branches;</li>
<li>by removing part of the history;</li>
<li>by removing intermediate revisions between two valuable ones (which means removing the intermediate changes in copy approach, or merging diffs in the diff approach).</li>
</ul>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="requirements.html" title="previous chapter">WFS versioning requirement specification</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="implementations.html" title="next chapter">Versioning implementations</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Versioning WFS - Versioning approaches classification</a><ul>
<li><a class="reference internal" href="#difference-handling">Difference handling</a></li>
<li><a class="reference internal" href="#versioning-direction-and-integral-copies">Versioning direction and integral copies</a></li>
<li><a class="reference internal" href="#branches-and-tags-management">Branches and tags management</a></li>
<li><a class="reference internal" href="#space-management">Space management</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="requirements.html" title="previous chapter">WFS versioning requirement specification</a></li>
            <li>Next: <a href="implementations.html" title="next chapter">Versioning implementations</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../../../_sources/programming-guide/versioning/wfsv/classification.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2011 GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>