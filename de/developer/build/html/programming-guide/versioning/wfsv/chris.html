
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Early implementation proposal &mdash; GeoServer 2.2.x Developer Manual</title>
  <link rel="stylesheet" href="../../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x Developer Manual" href="../../../index.html" />
      <link rel="up" title="Versioning implementation" href="implementation.html" />
      <link rel="next" title="Datastore design" href="dbschema.html" />
      <link rel="prev" title="Versioning implementation" href="implementation.html" />
</head>
<body class="programming-guide/versioning/wfsv/chris">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../../index.html">GeoServer 2.2.x Developer Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../../../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../../index.html">GeoServer 2.2.x Developer Manual</a> &raquo;</li>
  <li><a href="../../index.html" accesskey="U">Programming Guide</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Versioning</a> &raquo;</li>
  <li><a href="implementation.html" accesskey="U">Versioning implementation</a> &raquo;</li>
  <li>Early implementation proposal</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="dbschema.html" title="Datastore design"
       accesskey="N">next</a></li>
  <li>
    <a href="implementation.html" title="Versioning implementation"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="early-implementation-proposal">
<span id="versioning-implementation-chris"></span><h1>Early implementation proposal<a class="headerlink" href="#early-implementation-proposal" title="Permalink to this headline">Â¶</a></h1>
<p>Chris already provided his own vision about an implementation on the OpenSDI mailing list in April 2005.</p>
<p>It&#8217;s a nice starting point, and also works in a way different than ArcSDE, so it&#8217;s an interesting read.</p>
<p>What I&#8217;m envisioning at the moment is a table in a database that records every single update/insert action:</p>
<ul class="simple">
<li>It holds the diff, ie the changes between what the feature was and what the new one is.</li>
<li>It holds the username of the person who modified, and their comments on the change (like a cvs commit comment, why they made the change, what their source was, ect.).</li>
<li>It holds the featureid of the feature changed (which is a foreign key to the tiger-an db).</li>
<li>And it holds a location, or perhaps a bounding box, of the change. I suppose this could just follow the foreign key, but I think I may prefer the actual location. The nice part about this last</li>
<li>thing is that it allows you to get the list of diffs on a zoomed in part of the map, that are the ones actually relevant for the part of the map you are looking at. I&#8217;m thinking something similar to</li>
<li>subversion, where there is just a global revision number, for all changes, and those changes then affect certain features.</li>
<li>So if you were super zoomed in, and hit the edit button, then the &#8216;history&#8217; column for the page would just be the numbers of the revisions that affected that area, instead of the normal wiki way where all the</li>
<li>numbers are present. As for implementation, to retrieve the &#8216;history&#8217; column for any map you&#8217;re zoomed in on, you use WFS.</li>
<li>You would expose the diff table as WFS, and since it has locations of all the diffs, and feature ids (which in this case are the global revision numbers). To get the history for a given map, you would just do a WFS query on the bounding box (and indeed this makes it trivial to do things like &#8216;give me all commits in this bounding box made by &#8216;cholmes&#8217;, and the like, as it&#8217;s just a WFS query). And exposing the diff history as WFS would make it easier to implement in different clients, and indeed to maybe even use another WFS. We would just need to come up with a &#8216;spatial wiki history&#8217; gml application schema, and specify how to fill the fields on each commit (or perhaps make a special &#8216;wiki transaction&#8217; xml request? Though if the diff history was wfs-t then it could just be a second wfs insert transaction (Ah! Way too meta!)).</li>
</ul>
<p>Interesting points in my opinion:</p>
<ul class="simple">
<li>single version table for full data</li>
<li>commit bbox</li>
<li>versioning a la svn (thought it seems to me hard to implement with decent performance)</li>
<li>serving the diff table with wfs again</li>
</ul>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="implementation.html" title="previous chapter">Versioning implementation</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="dbschema.html" title="next chapter">Datastore design</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="implementation.html" title="previous chapter">Versioning implementation</a></li>
            <li>Next: <a href="dbschema.html" title="next chapter">Datastore design</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../../../_sources/programming-guide/versioning/wfsv/chris.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2011 GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>