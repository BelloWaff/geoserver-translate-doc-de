
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>OpenStreetMap &mdash; GeoServer 2.2.x Developer Manual</title>
  <link rel="stylesheet" href="../../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x Developer Manual" href="../../../index.html" />
      <link rel="up" title="Versioning implementations" href="implementations.html" />
      <link rel="next" title="Versioning implementation" href="implementation.html" />
      <link rel="prev" title="Versioning WFS - ArcSDE" href="arcsde.html" />
</head>
<body class="programming-guide/versioning/wfsv/osm">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../../index.html">GeoServer 2.2.x Developer Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../../../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../../index.html">GeoServer 2.2.x Developer Manual</a> &raquo;</li>
  <li><a href="../../index.html" accesskey="U">Programming Guide</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Versioning</a> &raquo;</li>
  <li><a href="implementations.html" accesskey="U">Versioning implementations</a> &raquo;</li>
  <li>OpenStreetMap</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="implementation.html" title="Versioning implementation"
       accesskey="N">next</a></li>
  <li>
    <a href="arcsde.html" title="Versioning WFS - ArcSDE"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="openstreetmap">
<span id="versioning-implementations-osm"></span><h1>OpenStreetMap<a class="headerlink" href="#openstreetmap" title="Permalink to this headline">¶</a></h1>
<p>From the OpenStreetMap home page:</p>
<ul class="simple">
<li>OpenStreetMap is a project aimed squarely at creating and providing free geographic data such as street maps to anyone who wants them;</li>
<li>Anyone can edit the current map using one of our map editors, or upload and share your GPS tracklogs. Before you can upload, or edit, you will need to create an account.</li>
</ul>
<p>OpenStreetMap is one of a kind in many ways, from the feature concept, to geometry handling, versioning approach, and API. Let&#8217;s analyze the most interesting parts of it.</p>
<div class="section" id="feature-concept">
<h2>Feature concept<a class="headerlink" href="#feature-concept" title="Permalink to this headline">¶</a></h2>
<p>Features in OpenStreetMap are tagged geometries, where tagging is completely open ended, a map from keys to values.
So, we have node, segment, ways and areas, where each record can have a different set of attributes.</p>
<p>This is very different from a WFS approach, where data is typed and has a foreseen number of attributes.
The pro is that any kind of information can be stored, the cons is that there is no type checking and you cannot handle data making assumptions on data structure (so no SLD or filters, for example).</p>
</div>
<div class="section" id="geometry-concept">
<h2>Geometry concept<a class="headerlink" href="#geometry-concept" title="Permalink to this headline">¶</a></h2>
<p>Geometries are not simple features, they are topologies:</p>
<blockquote>
<div><ul class="simple">
<li>Node is the basic concept, it&#8217;s a point. A node cab be shared by various segments (as start or end point).</li>
<li>Segment is a straight line between two nodes used to build ways and areas. Segments can be shared between various ways and areas;</li>
<li>Way is a set of segments.</li>
<li>Area is a set of segments as well. Apparently holes are not supported, not sure about multipolygons.</li>
</ul>
</div></blockquote>
<p>As said above, each can be tagged with extra information.</p>
</div>
<div class="section" id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h2>
<p>All data in OSM is apparently stored in a mysql database, whose schema is provided here: <a class="reference external" href="http://svn.openstreetmap.org/sql/mysql-schema.sql">http://svn.openstreetmap.org/sql/mysql-schema.sql</a>.
The schema is peculiar, there are no foreign keys or spatial indexes that I can see.</p>
<p>First thing you can note is that there&#8217;s a split between a set of current_xxx tables and xxx tables: the former represent the current state of the database, the last revision of it, whilst xxx tables do represent the history.
This is evidently done to increase performance, since the most accessed data is the &#8220;live&#8221; one anyways.
Each table representing a feature (nodes, segments, areas, ways) has a user attribution, a time stamp, and a visibility flag.</p>
<p>A version attribute is found in tables related to areas and ways, but not in segments and nodes (current tables do not have a version number). It seems the system relies more on timestamps than version numbers to do its work?</p>
<p>Tag handling is mixed, for nodes and segments it&#8217;s a single text field, whilst for area and ways the thing is handled with a normalized one to many approach.</p>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p>API is based on a REST approach. The API is simple, a full description can be found here: <a class="reference external" href="http://wiki.openstreetmap.org/index.php/REST">http://wiki.openstreetmap.org/index.php/REST</a>.</p>
<p>A few considerations here:</p>
<ul class="simple">
<li>all calls are authenticated using basic authentication, in order to provide attribution;</li>
<li>there&#8217;s no transaction concept, in order to add a new way you have perform three different requests, to separately add nodes, segments and areas. This seems to be quite fragile data consistency wise.</li>
<li>there is no commit message support, neither dirty area support, so it&#8217;s hard to tell what was done in each commit... this is consistent with the lack of transaction thought.</li>
<li>there&#8217;s no explicit rollback operation, thought data structures are in place to support it?</li>
<li>even if version number are handled internally, they are not shown in the xml format.</li>
</ul>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="arcsde.html" title="previous chapter">Versioning WFS - ArcSDE</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="implementation.html" title="next chapter">Versioning implementation</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">OpenStreetMap</a><ul>
<li><a class="reference internal" href="#feature-concept">Feature concept</a></li>
<li><a class="reference internal" href="#geometry-concept">Geometry concept</a></li>
<li><a class="reference internal" href="#versioning">Versioning</a></li>
<li><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="arcsde.html" title="previous chapter">Versioning WFS - ArcSDE</a></li>
            <li>Next: <a href="implementation.html" title="next chapter">Versioning implementation</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../../../_sources/programming-guide/versioning/wfsv/osm.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2011 GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>