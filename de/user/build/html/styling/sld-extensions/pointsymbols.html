
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Point symbology in GeoServer &mdash; GeoServer 2.2.x User Manual</title>
  <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x User Manual" href="../../index.html" />
      <link rel="up" title="SLD Extensions in GeoServer" href="index.html" />
      <link rel="next" title="Variable substitution in SLD" href="substitution.html" />
      <link rel="prev" title="Rendering Transformations" href="rendering-transform.html" />
</head>
<body class="styling/sld-extensions/pointsymbols">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.2.x User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.2.x User Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Styling</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">SLD Extensions in GeoServer</a> &raquo;</li>
  <li>Point symbology in GeoServer</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="substitution.html" title="Variable substitution in SLD"
       accesskey="N">next</a></li>
  <li>
    <a href="rendering-transform.html" title="Rendering Transformations"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="point-symbology-in-geoserver">
<span id="pointsymbols"></span><h1>Point symbology in GeoServer<a class="headerlink" href="#point-symbology-in-geoserver" title="Permalink to this headline">¶</a></h1>
<p>Point symbology is supported via the SLD <tt class="docutils literal"><span class="pre">Graphic</span></tt> element.
This element can appear directly in a <a class="reference internal" href="../sld-reference/pointsymbolizer.html#sld-reference-pointsymbolizer"><em>PointSymbolizer</em></a>.
It also can be used in a <a class="reference internal" href="../sld-reference/linesymbolizer.html#sld-reference-linesymbolizer"><em>LineSymbolizer</em></a> <tt class="docutils literal"><span class="pre">GraphicStroke</span></tt> to repeat symbols along lines
and in a <a class="reference internal" href="../sld-reference/polygonsymbolizer.html#sld-reference-polygonsymbolizer"><em>PolygonSymbolizer</em></a> <tt class="docutils literal"><span class="pre">GraphicFill</span></tt> to fill polygons with tiled and repeated symbols.</p>
<p><tt class="docutils literal"><span class="pre">Graphic</span></tt> contains either a <tt class="docutils literal"><span class="pre">Mark</span></tt> or an <tt class="docutils literal"><span class="pre">ExternalGraphic</span></tt> element.
<strong>Marks</strong> are predefined vector symbols whose stroke and fill are defined by the SLD itself.
<strong>External Graphics</strong> are external files (such as PNG images or SVG graphics)
that contain the shape and color information defining how to render a symbol.</p>
<p>In standard SLD the <tt class="docutils literal"><span class="pre">Mark</span></tt> and <tt class="docutils literal"><span class="pre">ExternalGraphic</span></tt> names are fixed strings.
GeoServer extends this by providing <cite>dynamic symbolizers</cite>,
which allow defining symbol names on a per-feature basis by embedding CQL expressions in them.</p>
<div class="section" id="marks">
<h2>Marks<a class="headerlink" href="#marks" title="Permalink to this headline">¶</a></h2>
<p>GeoServer supports the standard <tt class="docutils literal"><span class="pre">Mark</span></tt> symbols, plus an user-expandable set of extended symbols.
The symbol names are specified in the <tt class="docutils literal"><span class="pre">WellKnownName</span></tt> element.</p>
<p>See also the <a class="reference internal" href="../sld-reference/pointsymbolizer.html#sld-reference-pointsymbolizer"><em>PointSymbolizer</em></a> reference for further details, as well as the examples in the <a class="reference internal" href="../sld-cookbook/points.html#sld-cookbook-points"><em>Points</em></a> Cookbook section.</p>
<div class="section" id="standard-symbols">
<h3>Standard symbols<a class="headerlink" href="#standard-symbols" title="Permalink to this headline">¶</a></h3>
<p>The SLD specification mandates the support of the following symbols:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Name</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">square</span></tt></td>
<td>A square</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">circle</span></tt></td>
<td>A circle</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">triangle</span></tt></td>
<td>A triangle pointing up</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">star</span></tt></td>
<td>five-pointed star</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cross</span></tt></td>
<td>A square cross with space around (not suitable for hatch fills)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">x</span></tt></td>
<td>A square X with space around (not suitable for hatch fills)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="shape-symbols">
<h3>Shape symbols<a class="headerlink" href="#shape-symbols" title="Permalink to this headline">¶</a></h3>
<p>The shape symbols set adds extra symbols that are not part of the basic set.
They are prefixed by <tt class="docutils literal"><span class="pre">shape://</span></tt></p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Name</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">shape://vertline</span></tt></td>
<td>A vertical line (suitable for hatch fills or to make railroad symbols)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">shape://horline</span></tt></td>
<td>A horizontal line (suitable for hatch fills)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">shape://slash</span></tt></td>
<td>A diagonal line leaning forwards like the &#8220;slash&#8221; keyboard symbol (suitable for diagonal hatches)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">shape://backslash</span></tt></td>
<td>Same as <tt class="docutils literal"><span class="pre">shape://slash</span></tt>, but oriented in the opposite direction</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">shape://dot</span></tt></td>
<td>A very small circle with space around</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">shape://plus</span></tt></td>
<td>A + symbol, without space around (suitable for cross-hatch fills)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">shape://times</span></tt></td>
<td>A &#8220;X&#8221; symbol, without space around (suitable for cross-hatch fills)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">shape://oarrow</span></tt></td>
<td>An open arrow symbol (triangle without one side, suitable for placing arrows at the end of lines)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">shape://carrow</span></tt></td>
<td>An closed arrow symbol (closed triangle, suitable for placing arrows at the end of lines)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="ttf-marks">
<h3>TTF marks<a class="headerlink" href="#ttf-marks" title="Permalink to this headline">¶</a></h3>
<p>It is possible to create a mark using glyphs from any decorative or symbolic True Type Font, such as Wingdings, WebDings, or the many symbol fonts available on the internet.
The syntax for specifying this is:</p>
<div class="highlight-python"><pre>ttf://&lt;fontname&gt;#&lt;hexcode&gt;</pre>
</div>
<p>where <tt class="docutils literal"><span class="pre">fontname</span></tt> is the full name of a TTF font available to GeoServer, and <tt class="docutils literal"><span class="pre">hexcode</span></tt> is the hexadecimal code of the symbol.
To get the hex code of a symbol, use the &#8220;Char Map&#8221; utility available in most operating systems (Windows and Gnome on Linux both have one).</p>
<p>For example, to use the &#8220;shield&#8221; symbol contained in WebDings, the Gnome <tt class="docutils literal"><span class="pre">charmap</span></tt> reports the symbol hex code as shown:</p>
<div class="figure align-center">
<img alt="../../_images/charmap.png" src="../../_images/charmap.png" />
<p class="caption"><em>Selecting a symbol hex code in the Gnome char map</em></p>
</div>
<p>The SLD to use the shield glyph as a symbol is:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre> <span class="nt">&lt;PointSymbolizer&gt;</span>
     <span class="nt">&lt;Graphic&gt;</span>
       <span class="nt">&lt;Mark&gt;</span>
         <span class="nt">&lt;WellKnownName&gt;</span>ttf://Webdings#0x0064<span class="nt">&lt;/WellKnownName&gt;</span>
         <span class="nt">&lt;Fill&gt;</span>
           <span class="nt">&lt;CssParameter</span> <span class="na">name=</span><span class="s">&quot;fill&quot;</span><span class="nt">&gt;</span>#AAAAAA<span class="nt">&lt;/CssParameter&gt;</span>
         <span class="nt">&lt;/Fill&gt;</span>
         <span class="nt">&lt;Stroke/&gt;</span>
       <span class="nt">&lt;/Mark&gt;</span>
     <span class="nt">&lt;Size&gt;</span>16<span class="nt">&lt;/Size&gt;</span>
   <span class="nt">&lt;/Graphic&gt;</span>
 <span class="nt">&lt;/PointSymbolizer&gt;</span>
</pre></div>
</td></tr></table></div>
<p>This results in the following map display:</p>
<div class="figure align-center">
<img alt="../../_images/shields.png" src="../../_images/shields.png" />
<p class="caption"><em>Shield symbols rendered on the map</em></p>
</div>
</div>
<div class="section" id="extending-the-mark-subsytem-using-java">
<h3>Extending the Mark subsytem using Java<a class="headerlink" href="#extending-the-mark-subsytem-using-java" title="Permalink to this headline">¶</a></h3>
<p>The Mark subsystem is user-extensible.
To do this using Java code, implement the <tt class="docutils literal"><span class="pre">MarkFactory</span></tt> interface and declare the implementation in the <tt class="docutils literal"><span class="pre">META-INF/services/org.geotools.renderer.style.MarkFactory</span></tt> file.</p>
<p>For further information see the Javadoc of the GeoTools <a class="reference external" href="http://svn.osgeo.org/geotools/trunk/modules/library/render/src/main/java/org/geotools/renderer/style/MarkFactory.java">MarkFactory</a>,
along with the following example code:</p>
<blockquote>
<div><ul class="simple">
<li>The <a class="reference external" href="http://svn.osgeo.org/geotools/trunk/modules/library/render/src/main/resources/META-INF/services/org.geotools.renderer.style.MarkFactory">factory SPI registration file</a></li>
<li>The <a class="reference external" href="http://svn.osgeo.org/geotools/trunk/modules/library/render/src/main/java/org/geotools/renderer/style/TTFMarkFactory.java">TTFMarkFactory</a> implementation</li>
<li>The <a class="reference external" href="http://svn.osgeo.org/geotools/trunk/modules/library/render/src/main/java/org/geotools/renderer/style/ShapeMarkFactory.java">ShapeMarkFactory</a> implementation</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="external-graphics">
<h2>External Graphics<a class="headerlink" href="#external-graphics" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">ExternalGraphic</span></tt> is the other way to define point symbology.
Unlike marks, external graphics are used as-is, so the specification is somewhat simpler.
The element content specifies a graphic <tt class="docutils literal"><span class="pre">OnlineResource</span></tt> using a URL or file path, and the graphic <tt class="docutils literal"><span class="pre">Format</span></tt> using a MIME type:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre> <span class="nt">&lt;PointSymbolizer&gt;</span>
     <span class="nt">&lt;Graphic&gt;</span>
        <span class="nt">&lt;ExternalGraphic&gt;</span>
           <span class="nt">&lt;OnlineResource</span> <span class="na">xlink:type=</span><span class="s">&quot;simple&quot;</span> <span class="na">xlink:href=</span><span class="s">&quot;http://mywebsite.com/pointsymbol.png&quot;</span> <span class="nt">/&gt;</span>
           <span class="nt">&lt;Format&gt;</span>image/png<span class="nt">&lt;/Format&gt;</span>
        <span class="nt">&lt;/ExternalGraphic&gt;</span>
     <span class="nt">&lt;/Graphic&gt;</span>
 <span class="nt">&lt;/PointSymbolizer&gt;</span>
</pre></div>
</td></tr></table></div>
<p>As with <tt class="docutils literal"><span class="pre">Mark</span></tt>, a <tt class="docutils literal"><span class="pre">Size</span></tt> element can be optionally specified.
When using images as graphic symbols it is better to avoid resizing, as that may blur their appearance.
Use images at their native resolution by omitting the <tt class="docutils literal"><span class="pre">Size</span></tt> element.
In contrast, for SVG graphics specifying a <tt class="docutils literal"><span class="pre">Size</span></tt> is recommended.
SVG files are a vector-based format describing both shape and color,
so they scale cleanly to any size.</p>
<p>If the path of the symbol file is relative,
the file is looked for under <tt class="docutils literal"><span class="pre">$GEOSERVER_DATA_DIR/styles</span></tt>.
For example:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre> <span class="nt">&lt;PointSymbolizer&gt;</span>
   <span class="nt">&lt;Graphic&gt;</span>
     <span class="nt">&lt;ExternalGraphic&gt;</span>
       <span class="nt">&lt;OnlineResource</span> <span class="na">xlink:type=</span><span class="s">&quot;simple&quot;</span> <span class="na">xlink:href=</span><span class="s">&quot;burg02.svg&quot;</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;Format&gt;</span>image/svg+xml<span class="nt">&lt;/Format&gt;</span>
     <span class="nt">&lt;/ExternalGraphic&gt;</span>
     <span class="nt">&lt;Size&gt;</span>20<span class="nt">&lt;/Size&gt;</span>
   <span class="nt">&lt;/Graphic&gt;</span>
 <span class="nt">&lt;/PointSymbolizer&gt;</span>
</pre></div>
</td></tr></table></div>
<p>In this example an SVG graphic is being used, so the size is specified explicitly.</p>
</div>
<div class="section" id="dynamic-symbolizers">
<h2>Dynamic symbolizers<a class="headerlink" href="#dynamic-symbolizers" title="Permalink to this headline">¶</a></h2>
<p>In standard SLD, the <tt class="docutils literal"><span class="pre">Mark/WellKnowName</span></tt> element and the <tt class="docutils literal"><span class="pre">ExternalGraphic/OnlineResource/&#64;xlink:href</span></tt> attribute are fixed strings.
This means they have the same value for all rendered features.
When the symbols to be displayed vary depending on feature attributes this restriction leads to very verbose styling, as a separate <tt class="docutils literal"><span class="pre">Rule</span></tt> and <tt class="docutils literal"><span class="pre">Symbolizer</span></tt> must be used for each different symbol.</p>
<p>GeoServer improves this by allowing CQL expressions to be embedded inside the content of both <tt class="docutils literal"><span class="pre">WellKnownName</span></tt> and <tt class="docutils literal"><span class="pre">OnlineResource/&#64;xlink:href</span></tt>.
When the name of the symbols to be used can be derived from the feature attribute values, this provides much more compact styling.
CQL expressions can be embedded in a <tt class="docutils literal"><span class="pre">WellKnownName</span></tt> string or an <tt class="docutils literal"><span class="pre">href</span></tt> URL by using the syntax:</p>
<div class="highlight-python"><pre>${&lt;cql expression&gt;}</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently <tt class="docutils literal"><span class="pre">xlink:href</span></tt> strings must be valid URLs <em>before</em> expression expansion is performed.
This means that the URL string cannot be completely provided by an expression.</p>
</div>
<p>The simplest form of expression is a single attribute name, such as <tt class="docutils literal"><span class="pre">${STATE_ABBR}</span></tt>.
For example, suppose we want to display the flags of the US states using symbols whose file names match the state name.
The following style specifies the flag symbols using a single rule:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;ExternalGraphic&gt;</span>
   <span class="nt">&lt;OnlineResource</span> <span class="na">xlink:type=</span><span class="s">&quot;simple&quot;</span>
                   <span class="na">xlink:href=</span><span class="s">&quot;http://mysite.com/tn_${STATE_ABBR}.jpg&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;Format&gt;</span>image/jpeg<span class="nt">&lt;/Format&gt;</span>
<span class="nt">&lt;/ExternalGraphic&gt;</span>
</pre></div>
</td></tr></table></div>
<p>If manipulation of the attribute values is required a full CQL expression can be specified.
For example, if the values in the <tt class="docutils literal"><span class="pre">STATE_ABBR</span></tt> attribute are uppercase but the URL requires a lowercase name, the CQL <tt class="docutils literal"><span class="pre">strToLowerCase</span></tt> function can be used:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;ExternalGraphic&gt;</span>
   <span class="nt">&lt;OnlineResource</span> <span class="na">xlink:type=</span><span class="s">&quot;simple&quot;</span>
            <span class="na">xlink:href=</span><span class="s">&quot;http://mysite.com/tn_${strToLowerCase(STATE_ABBR)}.jpg&quot;</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;Format&gt;</span>image/jpeg<span class="nt">&lt;/Format&gt;</span>
<span class="nt">&lt;/ExternalGraphic&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="rendering-transform.html" title="previous chapter">Rendering Transformations</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="substitution.html" title="next chapter">Variable substitution in SLD</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Point symbology in GeoServer</a><ul>
<li><a class="reference internal" href="#marks">Marks</a><ul>
<li><a class="reference internal" href="#standard-symbols">Standard symbols</a></li>
<li><a class="reference internal" href="#shape-symbols">Shape symbols</a></li>
<li><a class="reference internal" href="#ttf-marks">TTF marks</a></li>
<li><a class="reference internal" href="#extending-the-mark-subsytem-using-java">Extending the Mark subsytem using Java</a></li>
</ul>
</li>
<li><a class="reference internal" href="#external-graphics">External Graphics</a></li>
<li><a class="reference internal" href="#dynamic-symbolizers">Dynamic symbolizers</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="rendering-transform.html" title="previous chapter">Rendering Transformations</a></li>
            <li>Next: <a href="substitution.html" title="next chapter">Variable substitution in SLD</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../../_sources/styling/sld-extensions/pointsymbols.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>