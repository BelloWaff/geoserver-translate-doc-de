
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Labeling &mdash; GeoServer 2.2.x User Manual</title>
  <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x User Manual" href="../../index.html" />
      <link rel="up" title="SLD Reference" href="index.html" />
      <link rel="next" title="RasterSymbolizer" href="rastersymbolizer.html" />
      <link rel="prev" title="TextSymbolizer" href="textsymbolizer.html" />
</head>
<body class="styling/sld-reference/labeling">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.2.x User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.2.x User Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Styling</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">SLD Reference</a> &raquo;</li>
  <li>Labeling</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="rastersymbolizer.html" title="RasterSymbolizer"
       accesskey="N">next</a></li>
  <li>
    <a href="textsymbolizer.html" title="TextSymbolizer"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="labeling">
<span id="sld-reference-labeling"></span><h1>Labeling<a class="headerlink" href="#labeling" title="Permalink to this headline">¶</a></h1>
<p>This section discusses the details of controlling label placement
via the standard SLD options.
It also describes a number of GeoServer enhanced options for label placement
that provide better cartographic output.</p>
<div class="section" id="labelplacement">
<h2>LabelPlacement<a class="headerlink" href="#labelplacement" title="Permalink to this headline">¶</a></h2>
<p>The SLD specification defines two alternative
label placement strategies which can be used in the <tt class="docutils literal"><span class="pre">&lt;LabelPlacement&gt;</span></tt> element:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">&lt;PointPlacement&gt;</span></tt> places labels at a single point</li>
<li><tt class="docutils literal"><span class="pre">&lt;LinePlacement&gt;</span></tt> places labels along a line</li>
</ul>
</div>
<div class="section" id="pointplacement">
<h2>PointPlacement<a class="headerlink" href="#pointplacement" title="Permalink to this headline">¶</a></h2>
<p>When <tt class="docutils literal"><span class="pre">&lt;PointPlacement&gt;</span></tt> is used the geometry is labelled at a single <strong>label point</strong>.
For lines, this point lies at the middle of the visible portion of the line.
For polygons, the point is the centroid of the visible portion of the polygon.
The position of the label relative to the label point can be controlled by the following
sub-elements:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Element</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;AnchorPoint&gt;</span></tt></td>
<td>This is relative to the LABEL. Using this you can do things such as center the label on top of the point, have the label to the left of the point, or have the label centered under the point.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;Displacement&gt;</span></tt></td>
<td>Offsets the label from the anchor point by a given number pixels in X and Y.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&lt;Rotation&gt;</span></tt></td>
<td>Rotates the label clockwise by a given number of degrees.</td>
</tr>
</tbody>
</table>
<p>The best way to explain these options is with examples.</p>
<div class="section" id="anchorpoint">
<h3>AnchorPoint<a class="headerlink" href="#anchorpoint" title="Permalink to this headline">¶</a></h3>
<p>The anchor point determines where the label is placed relative to the label point.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;AnchorPoint&gt;</span>
   <span class="nt">&lt;AnchorPointX&gt;</span>
   0.5
   <span class="nt">&lt;/AnchorPointX&gt;</span>
   <span class="nt">&lt;AnchorPointY&gt;</span>
   0.5
   <span class="nt">&lt;/AnchorPointY&gt;</span>
<span class="nt">&lt;/AnchorPoint&gt;</span>
</pre></div>
</div>
<p>The anchor point values  are specified relative to the bounding box of the label.
The bottom left of the box is (0, 0), the top left is (1, 1), and the middle is (0.5, 0.5).
The (X,Y) location of the anchor point inside the label&#8217;s bounding box is placed at the label point.</p>
<div class="figure align-center">
<img alt="../../_images/label_bbox.png" src="../../_images/label_bbox.png" />
</div>
<p>The following examples show how changing the anchor point affects the position of labels:</p>
<div class="figure">
<img alt="../../_images/point_x0y0_5.png" src="../../_images/point_x0y0_5.png" />
</div>
<p><em>X=0, Y=0.5 - (default) places the label to the right of the label point</em></p>
<div class="figure">
<img alt="../../_images/point_x0_5y0_5.png" src="../../_images/point_x0_5y0_5.png" />
</div>
<p><em>X=0.5, Y=0.5 - places the centre of the label at the label point</em></p>
<div class="figure">
<img alt="../../_images/point_x15y0_5.png" src="../../_images/point_x15y0_5.png" />
</div>
<p><em>X=1, Y=0.5 - places the label to the left of the label point</em></p>
<div class="figure">
<img alt="../../_images/point_x0_5y0.png" src="../../_images/point_x0_5y0.png" />
</div>
<p><em>X=0.5, Y=0 - places the label horizontally centred above the label point</em></p>
</div>
<div class="section" id="displacement">
<h3>Displacement<a class="headerlink" href="#displacement" title="Permalink to this headline">¶</a></h3>
<p>Displacement allows fine control of the placement of the label.
The displacement values offset the location of the label
from the anchor point
by a specified number of pixels.
The element syntax is:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;Displacement&gt;</span>
  <span class="nt">&lt;DisplacementX&gt;</span>
     10
  <span class="nt">&lt;/DisplacementX&gt;</span>
  <span class="nt">&lt;DisplacementY&gt;</span>
      0
  <span class="nt">&lt;/DisplacementY&gt;</span>
<span class="nt">&lt;/Displacement&gt;</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="figure align-center">
<img alt="../../_images/point_x0y0_5_displacex10.png" src="../../_images/point_x0y0_5_displacex10.png" />
</div>
<p><em>Displacement of X=10 pixels (compare with default anchor point of (X=0, Y=0.5) shown above)</em></p>
<div class="figure align-center">
<img alt="../../_images/point_x0y1_displacey10.png" src="../../_images/point_x0y1_displacey10.png" />
</div>
<p><em>Displacement of Y=-10 pixels (compare with anchor point (X= 0.5, Y=1.0) - not shown)</em></p>
</div>
<div class="section" id="rotation">
<h3>Rotation<a class="headerlink" href="#rotation" title="Permalink to this headline">¶</a></h3>
<p>The optional <tt class="docutils literal"><span class="pre">&lt;Rotation&gt;</span></tt> element specifies that labels should be rotated clockwise by a given number of degrees</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;Rotation&gt;</span>
  45
<span class="nt">&lt;/Rotation&gt;</span>
</pre></div>
</div>
<p>The examples below show how the rotation interacts with anchor points and displacements.</p>
<div class="figure">
<img alt="../../_images/rot1.png" src="../../_images/rot1.png" />
</div>
<p><em>45 degree rotation</em></p>
<div class="figure">
<img alt="../../_images/rot2.png" src="../../_images/rot2.png" />
</div>
<p><em>45 degree rotation with anchor point (X=0.5, Y=0.5)</em></p>
<div class="figure">
<img alt="../../_images/rot3.png" src="../../_images/rot3.png" />
</div>
<p><em>45 degree rotation with 40-pixel X displacement</em></p>
<div class="figure">
<img alt="../../_images/rot4.png" src="../../_images/rot4.png" />
</div>
<p><em>45 degree rotation with 40-pixel Y displacement with anchor point (X=0.5, Y=0.5)</em></p>
</div>
</div>
<div class="section" id="lineplacement">
<h2>LinePlacement<a class="headerlink" href="#lineplacement" title="Permalink to this headline">¶</a></h2>
<p>To label linear features (such as a road or river), the <tt class="docutils literal"><span class="pre">&lt;LinePlacement&gt;</span></tt> element can be specified.
This indicates that the styler should determine the best placement and rotation for the labels
along the lines.</p>
<p>The LinePlacement element provides one optional sub-element, <tt class="docutils literal"><span class="pre">&lt;PerpendicularOffset&gt;</span></tt>.</p>
<div class="section" id="perpendicularoffset">
<h3>PerpendicularOffset<a class="headerlink" href="#perpendicularoffset" title="Permalink to this headline">¶</a></h3>
<p>The optional <tt class="docutils literal"><span class="pre">&lt;PerpendicularOffset&gt;</span></tt> element allows you to position a label above or below a line.
(This is similiar to the <tt class="docutils literal"><span class="pre">&lt;DisplacementY&gt;</span></tt> for label points described above.)
The displacement value is specified in pixels.
A positive value displaces upwards, a negative value downwards.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;LabelPlacement&gt;</span>
  <span class="nt">&lt;LinePlacement&gt;</span>
    <span class="nt">&lt;PerpendicularOffset&gt;</span>
       10
    <span class="nt">&lt;/PerpendicularOffset&gt;</span>
  <span class="nt">&lt;/LinePlacement&gt;</span>
<span class="nt">&lt;/LabelPlacement&gt;</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="figure">
<img alt="../../_images/lp_1.png" src="../../_images/lp_1.png" />
</div>
<p><em>PerpendicularOffset = 0 (default)</em></p>
<div class="figure">
<img alt="../../_images/lp_2.png" src="../../_images/lp_2.png" />
</div>
<p><em>PerpendicularOffset = 10</em></p>
</div>
</div>
<div class="section" id="composing-labels-from-multiple-attributes">
<h2>Composing labels from multiple attributes<a class="headerlink" href="#composing-labels-from-multiple-attributes" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">&lt;Label&gt;</span></tt> element in TextSymbolizer is said to be mixed, that is, its content can be a mixture of plain text and OGC Expressions. The mix gets interepreted as a concatenation, this means you can leverage it to get complex labels out of multiple attributes.</p>
<p>For example, if you want both a state name and its abbreviation to appear in a label, you can do the following:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;Label&gt;</span>
  <span class="nt">&lt;ogc:PropertyName&gt;</span>STATE_NAME<span class="nt">&lt;/ogc:PropertyName&gt;</span> (<span class="nt">&lt;ogc:PropertyName&gt;</span>STATE_ABBR<span class="nt">&lt;/ogc:PropertyName&gt;</span>)
<span class="nt">&lt;/Label&gt;</span>
</pre></div>
</div>
<p>and you&#8217;ll get a label such as <strong>Texas (TX)</strong>.</p>
<p>If you need to add extra white space or newline, you&#8217;ll stumble into an xml oddity.  The whitespace handling in the Label element is following a XML mandated rule called &#8220;collapse&#8221;, in which all leading and trailing whitespaces have to be removed, whilst all whitespaces (and newlines) in the middle of the xml element are collapsed into a single whitespace.</p>
<p>So, what if you need to insert a newline or a sequence of two or more spaces between your property names? Enter CDATA. CDATA is a special XML section that has to be returned to the interpreter as-is, without following any whitespace handling rule.
So, for example, if you wanted to have the state abbreviation sitting on the next line you&#8217;d use the following:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;Label&gt;</span>
  <span class="nt">&lt;ogc:PropertyName&gt;</span>STATE_NAME<span class="nt">&lt;/ogc:PropertyName&gt;</span><span class="cp">&lt;![CDATA[</span>
<span class="cp">]]&gt;</span>(<span class="nt">&lt;ogc:PropertyName&gt;</span>STATE_ABBR<span class="nt">&lt;/ogc:PropertyName&gt;</span>)
<span class="nt">&lt;/Label&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="geoserver-enhanced-options">
<h2>Geoserver Enhanced Options<a class="headerlink" href="#geoserver-enhanced-options" title="Permalink to this headline">¶</a></h2>
<p>GeoServer provides a number of label styling options as extensions to the SLD specification.
Using these options gives more control over how the map looks,
since the SLD standard isn&#8217;t expressive enough to provide all the options one might want.</p>
<p>These options are specified as subelements of <tt class="docutils literal"><span class="pre">&lt;TextSymbolizer&gt;</span></tt>.</p>
<div class="section" id="priority-labeling">
<span id="labeling-priority"></span><h3>Priority Labeling<a class="headerlink" href="#priority-labeling" title="Permalink to this headline">¶</a></h3>
<p>The optional <tt class="docutils literal"><span class="pre">&lt;Priority&gt;</span></tt> element allows specifying label priority based on
an attribute of a dataset.
This allows controlling how conflicts (overlaps) between feature labels
are resolved during rendering.
The content of the <tt class="docutils literal"><span class="pre">&lt;Priority&gt;</span></tt> element is a <em>Filter Expression</em>
to retrieve or calculate a priority value for each feature.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Standard SLD Conflict Resolution</strong></p>
<p class="last">If the <tt class="docutils literal"><span class="pre">&lt;Priority&gt;</span></tt> element is not present, then standard SLD label conflict resolution is used.
Under this strategy, in a group of conflicting labels the label to display is chosen essentially at random.</p>
</div>
<p>For example, take the following dataset of cities:</p>
<div class="highlight-python"><pre>City Name   | population
------------+------------
Yonkers     |     197,818
Jersey City |     237,681
Newark      |     280,123
New York    |   8,107,916</pre>
</div>
<div class="figure align-center">
<img alt="../../_images/priority_all.png" src="../../_images/priority_all.png" />
</div>
<p><em>City locations (large scale map)</em></p>
<p>Most people know where New York City is, but don&#8217;t know where Yonkers is.
Thus we want to give the label &#8220;New York&#8221; priority so it will be visible when in conflict with (overlapping) &#8220;Yonkers&#8221;.
To do this we include the following code in the <tt class="docutils literal"><span class="pre">&lt;TextSymbolizer&gt;</span></tt>:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;Priority&gt;</span>
    <span class="nt">&lt;PropertyName&gt;</span>population<span class="nt">&lt;/PropertyName&gt;</span>
<span class="nt">&lt;/Priority&gt;</span>
</pre></div>
</div>
<p>This ensures that at small scales New York is labeled in preference to the less populated cities:</p>
<div class="figure align-center">
<img alt="../../_images/priority_some.png" src="../../_images/priority_some.png" />
</div>
<p><em>City locations (small scale map)</em></p>
<p>Without priority labeling, Yonkers could be labeled in preference to New York,
making it difficult to interpret the map.
At scales showing many features,
priority labeling is essential to ensure that larger cities are more visible than smaller cities.</p>
<div class="figure align-center">
<img alt="../../_images/priority_lots.png" src="../../_images/priority_lots.png" />
</div>
</div>
<div class="section" id="grouping-features">
<span id="labeling-group"></span><h3>Grouping Features<a class="headerlink" href="#grouping-features" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">group</span></tt> option allows displaying a single label for multiple features
in a logical group.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;group&quot;</span><span class="nt">&gt;</span>yes<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
<p>Grouping works by collecting all features with the same label text,
then choosing a representative geometry for the group,
according to the following rules:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Geometry</strong></td>
<td><strong>Label Point</strong></td>
</tr>
<tr class="row-even"><td>Point Set</td>
<td>The first point inside the view rectangle is used.</td>
</tr>
<tr class="row-odd"><td>Line Set</td>
<td>Lines are joined together, clipped to the view rectangle, and the longest path is used.</td>
</tr>
<tr class="row-even"><td>Polygon Set</td>
<td>Polygons are clipped to the view rectangle, and the largest polygon is used.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Be careful that the labels truly indicate features that should be grouped together.
For example, grouping on city name alone might end up creating a group
containing both Paris (France) and Paris (Texas).</p>
</div>
<p>Road data is a classic example to show why grouping is useful.
It is usually desirable to display only a single label for all of &#8220;Main Street&#8221;,
not a label for every block of &#8220;Main Street.&#8221;</p>
<p>When the <tt class="docutils literal"><span class="pre">group</span></tt> option is off (the default), grouping is not performed and every block feature is labeled
(subject to label deconfliction):</p>
<div class="figure align-center">
<img alt="../../_images/group_not.png" src="../../_images/group_not.png" />
</div>
<p>When the <tt class="docutils literal"><span class="pre">group</span></tt> option is used, geometries with the same label are grouped together
and the label position is determined from the entire group.
This produces a much less cluttered map:</p>
<div class="figure align-center">
<img alt="../../_images/group_yes.png" src="../../_images/group_yes.png" />
</div>
</div>
<div class="section" id="overlapping-and-separating-labels-vendoroption-name-spacearound">
<span id="labeling-space-around"></span><h3>Overlapping and Separating Labels (&lt;VendorOption name=&#8221;spaceAround&#8221;&gt;)<a class="headerlink" href="#overlapping-and-separating-labels-vendoroption-name-spacearound" title="Permalink to this headline">¶</a></h3>
<p>By default GeoServer will not render labels &#8220;on top of each other&#8221;.
By using the <tt class="docutils literal"><span class="pre">spaceAround</span></tt> option you can either allow labels to overlap,
or add extra space around labels.
The value supplied for the option is a positive or negative size in pixels.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;spaceAround&quot;</span><span class="nt">&gt;</span>10<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
<p>Using the default value of 0, the bounding box of a label cannot overlap the bounding box of another label:</p>
<div class="figure align-center">
<img alt="../../_images/space_0.png" src="../../_images/space_0.png" />
</div>
<p>With a negative spaceAround value, overlapping is allowed:</p>
<div class="figure align-center">
<img alt="../../_images/space_neg.png" src="../../_images/space_neg.png" />
</div>
<p>With a positive <tt class="docutils literal"><span class="pre">spaceAround</span></tt> value of 10, each label will be 20 pixels apart from each other:</p>
<div class="figure align-center">
<img alt="../../_images/space_10.png" src="../../_images/space_10.png" />
</div>
<p>Positive <tt class="docutils literal"><span class="pre">spaceAround</span></tt> values actually provide twice the space that you might expect.
This is because you can specify a spaceAround for one label as 5, and for another label (in another TextSymbolizer) as 3.
The total distance between them will be 8.
Two labels in the first symbolizer (&#8220;5&#8221;) will each be 5 pixels apart from each other, for a total of 10 pixels.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Interaction between values in different TextSymbolizers</strong></p>
<p class="last">You can have multiple TextSymbolizers in your SLD file, each with a different spaceAround option. This will normally do what you would think if all your spaceAround options are &gt;=0. If you have negative values (&#8216;allow overlap&#8217;) then these labels can overlap labels that you&#8217;ve said should not be overlapping. If you dont like this behavior, its not too difficult to change - feel free to submit a patch!</p>
</div>
</div>
<div class="section" id="followline">
<span id="labeling-follow-line"></span><h3>followLine<a class="headerlink" href="#followline" title="Permalink to this headline">¶</a></h3>
<p>The <strong>followLine</strong> option forces a label to follow the curve of the line. To use this option add the following to the <tt class="docutils literal"><span class="pre">&lt;TextSymbolizer&gt;</span></tt>.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;followLine&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
<p>It is required to use <tt class="docutils literal"><span class="pre">&lt;LinePlacement&gt;</span></tt> along with this option to ensure that labels are placd along lines:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;LabelPlacement&gt;</span>
  <span class="nt">&lt;LinePlacement/&gt;</span>
<span class="nt">&lt;/LabelPlacement&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="maxdisplacement">
<span id="labeling-max-displacement"></span><h3>maxDisplacement<a class="headerlink" href="#maxdisplacement" title="Permalink to this headline">¶</a></h3>
<p>The <strong>maxDisplacement</strong> option controls the displacement of the label along a line. Normally GeoServer would label a line at its center point only, provided the location is not busy with another label, and not label it at all otherwise. When set, the labeller will search for another location within <strong>maxDisplacement</strong> pixels from the pre-computed label point.</p>
<p>When used in conjunction with <strong>repeat</strong>, the value for <strong>maxDisplacement</strong> should always be lower than the value for repeat.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;maxDisplacement&quot;</span><span class="nt">&gt;</span>10<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="repeat">
<span id="labeling-repeat"></span><h3>repeat<a class="headerlink" href="#repeat" title="Permalink to this headline">¶</a></h3>
<p>The <strong>repeat</strong> option determines how often GeoServer labels a line. Normally GeoServer would label each line only once, regardless of their length. Specify a positive value to make it draw the label every <strong>repeat</strong> pixels.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;repeat&quot;</span><span class="nt">&gt;</span>100<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="labelallgroup">
<span id="labeling-all-group"></span><h3>labelAllGroup<a class="headerlink" href="#labelallgroup" title="Permalink to this headline">¶</a></h3>
<p>The <strong>labelAllGroup</strong> option makes sure that all of the segments in a line group are labeled instead of just the longest one.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;labelAllGroup&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="maxangledelta">
<span id="labeling-max-angle-delta"></span><h3>maxAngleDelta<a class="headerlink" href="#maxangledelta" title="Permalink to this headline">¶</a></h3>
<p>Designed to use used in conjuection with <strong>followLine</strong>, the <strong>maxAngleDelta</strong> option sets the maximum angle, in degrees, between two subsequent characters in a curved label. Large angles create either visually disconnected words or overlapping characters. It is advised not to use angles larger than 30.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;maxAngleDelta&quot;</span><span class="nt">&gt;</span>15<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="autowrap">
<span id="labeling-autowrap"></span><h3>autoWrap<a class="headerlink" href="#autowrap" title="Permalink to this headline">¶</a></h3>
<p>The <strong>autoWrap</strong> option wraps labels when they exceed the given value, given in pixels. Make sure to give a dimension wide enough to accommodate the longest word other wise this option will split words over multiple lines.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;autoWrap&quot;</span><span class="nt">&gt;</span>50<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="forcelefttoright">
<span id="labeling-force-left-to-right"></span><h3>forceLeftToRight<a class="headerlink" href="#forcelefttoright" title="Permalink to this headline">¶</a></h3>
<p>The labeller always tries to draw labels so that they can be read, meaning the label does not always follow the line orientation, but sometimes it&#8217;s flipped 180° instead to allow for normal reading. This may get in the way if the label is a directional arrow, and you&#8217;re trying to show one way directions (assuming the geometry is oriented along the one way, and that you have a flag to discern one ways from streets with both circulations).</p>
<p>The following setting disables label flipping, making the label always follow the natural orientation of the line being labelled:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;forceLeftToRight&quot;</span><span class="nt">&gt;</span>false<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="conflictresolution">
<span id="labeling-conflict-resolution"></span><h3>conflictResolution<a class="headerlink" href="#conflictresolution" title="Permalink to this headline">¶</a></h3>
<p>By default labels are subjected to conflict resolution, meaning the renderer will not allow any label to overlap with a label that has been drawn already. Setting this parameter to false pull the label out of the conflict resolution game, meaning the label will be drawn even if it overlaps with other labels, and other labels drawn after it won&#8217;t mind overlapping with it.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;conflictResolution&quot;</span><span class="nt">&gt;</span>false<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="goodness-of-fit">
<span id="labeling-goodness-of-fit"></span><h3>Goodness of Fit<a class="headerlink" href="#goodness-of-fit" title="Permalink to this headline">¶</a></h3>
<p>Geoserver will remove labels if they are a particularly bad fit for the geometry they are labeling.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Geometry</strong></td>
<td><strong>Goodness of Fit Algorithm</strong></td>
</tr>
<tr class="row-even"><td>Point</td>
<td>Always returns 1.0 since the label is at the point</td>
</tr>
<tr class="row-odd"><td>Line</td>
<td>Always returns 1.0 since the label is always placed on the line.</td>
</tr>
<tr class="row-even"><td>Polygon</td>
<td>The label is sampled approximately at every letter. The distance from these points to the polygon is determined and each sample votes based on how close it is to the polygon. (see LabelCacheDefault#goodnessOfFit())</td>
</tr>
</tbody>
</table>
<p>The default value is 0.5, but it can be modified using:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;goodnessOfFit&quot;</span><span class="nt">&gt;</span>0.3<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="polygon-alignment">
<h3>Polygon alignment<a class="headerlink" href="#polygon-alignment" title="Permalink to this headline">¶</a></h3>
<p>GeoServer normally tries to place horizontal labels within a polygon, and give up in case the label position is busy or if the label does not fit enough in the polygon. This options allows GeoServer to try alternate rotations for the labels.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;VendorOption</span> <span class="na">name=</span><span class="s">&quot;polygonAlign&quot;</span><span class="nt">&gt;</span>mbr<span class="nt">&lt;/VendorOption&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Option</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>manual</td>
<td>The default value, only the rotation manually specified in the <tt class="docutils literal"><span class="pre">&lt;Rotation&gt;</span></tt> tag will be used</td>
</tr>
<tr class="row-odd"><td>ortho</td>
<td>If the label does not fit horizontally and the polygon is taller than wider the vertical alignement will also be tried</td>
</tr>
<tr class="row-even"><td>mbr</td>
<td>If the label does not fit horizontally the minimum bounding rectangle will be computed and a label aligned to it will be tried out as well</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="textsymbolizer.html" title="previous chapter">TextSymbolizer</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="rastersymbolizer.html" title="next chapter">RasterSymbolizer</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Labeling</a><ul>
<li><a class="reference internal" href="#labelplacement">LabelPlacement</a></li>
<li><a class="reference internal" href="#pointplacement">PointPlacement</a><ul>
<li><a class="reference internal" href="#anchorpoint">AnchorPoint</a></li>
<li><a class="reference internal" href="#displacement">Displacement</a></li>
<li><a class="reference internal" href="#rotation">Rotation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lineplacement">LinePlacement</a><ul>
<li><a class="reference internal" href="#perpendicularoffset">PerpendicularOffset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#composing-labels-from-multiple-attributes">Composing labels from multiple attributes</a></li>
<li><a class="reference internal" href="#geoserver-enhanced-options">Geoserver Enhanced Options</a><ul>
<li><a class="reference internal" href="#priority-labeling">Priority Labeling</a></li>
<li><a class="reference internal" href="#grouping-features">Grouping Features</a></li>
<li><a class="reference internal" href="#overlapping-and-separating-labels-vendoroption-name-spacearound">Overlapping and Separating Labels (&lt;VendorOption name=&#8221;spaceAround&#8221;&gt;)</a></li>
<li><a class="reference internal" href="#followline">followLine</a></li>
<li><a class="reference internal" href="#maxdisplacement">maxDisplacement</a></li>
<li><a class="reference internal" href="#repeat">repeat</a></li>
<li><a class="reference internal" href="#labelallgroup">labelAllGroup</a></li>
<li><a class="reference internal" href="#maxangledelta">maxAngleDelta</a></li>
<li><a class="reference internal" href="#autowrap">autoWrap</a></li>
<li><a class="reference internal" href="#forcelefttoright">forceLeftToRight</a></li>
<li><a class="reference internal" href="#conflictresolution">conflictResolution</a></li>
<li><a class="reference internal" href="#goodness-of-fit">Goodness of Fit</a></li>
<li><a class="reference internal" href="#polygon-alignment">Polygon alignment</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="textsymbolizer.html" title="previous chapter">TextSymbolizer</a></li>
            <li>Next: <a href="rastersymbolizer.html" title="next chapter">RasterSymbolizer</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../../_sources/styling/sld-reference/labeling.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>