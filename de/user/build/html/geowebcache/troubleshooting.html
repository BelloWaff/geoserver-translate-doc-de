
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Troubleshooting &mdash; GeoServer 2.2.x User Manual</title>
  <link rel="stylesheet" href="../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x User Manual" href="../index.html" />
      <link rel="up" title="Caching with GeoWebCache" href="index.html" />
      <link rel="next" title="Google Earth" href="../googleearth/index.html" />
      <link rel="prev" title="Disk Quota" href="rest/diskquota.html" />
</head>
<body class="geowebcache/troubleshooting">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../index.html">GeoServer 2.2.x User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoServer 2.2.x User Manual</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Caching with GeoWebCache</a> &raquo;</li>
  <li>Troubleshooting</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../googleearth/index.html" title="Google Earth"
       accesskey="N">next</a></li>
  <li>
    <a href="rest/diskquota.html" title="Disk Quota"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="troubleshooting">
<span id="gwc-troubleshooting"></span><h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h1>
<p>This section will discuss some common issues with the integrated GeoWebCache and their solutions.</p>
<div class="section" id="grid-misalignment">
<h2>Grid misalignment<a class="headerlink" href="#grid-misalignment" title="Permalink to this headline">¶</a></h2>
<p>Sometimes errors will occur when requesting data from GeoWebCache endpoints.  The error displayed might say that the &#8220;resolution is not supported&#8221; or the &#8220;bounds do not align.&#8221;  This is due to the client making WMS requests that do not align with the grid of tiles that GeoWebCache has created, such as differing map bounds or layer bounds, or an unsupported resolution.  If you are using OpenLayers as a client, looking at the source code of the included demos may provide more clues to matching up the grid.</p>
<p>An alternative workaround is to enable direct WMS integration with the GeoServer WMS.  You can set this on the <a class="reference internal" href="../webadmin/tilecache/defaults.html#webadmin-tilecaching-defaults"><em>Caching defaults</em></a> page.</p>
</div>
<div class="section" id="direct-wms-integration">
<h2>Direct WMS integration<a class="headerlink" href="#direct-wms-integration" title="Permalink to this headline">¶</a></h2>
<p>Direct integration allows WMS requests served through GeoServer to be cached as if they were received and processed by GeoWebCache.  With Direct WMS Integration, a request may either be handled by the GeoServer WMS or GeoWebCache WMS.</p>
<p>Sometimes requests that should go to GeoWebCache will instead be passed through to GeoServer, resulting in no tiles saved.  That said, it is possible to determine why a request was not handled by GeoWebCache when intended.  This is done by using the command-line utility <a class="reference external" href="http://curl.haxx.se">cURL</a> and inspecting the response headers.</p>
<p>First, obtain a sample request.  This can easily be done by going to the Layer Preview for a given layer, setting the <em class="guilabel">Tiled</em> parameter to <em class="guilabel">Tiled</em>, then right-clicking on an area of the map and copy the full path to the image location.  If done correctly, the result will be a GET request that looks something like this:</p>
<div class="highlight-python"><pre>http://localhost:8090/geoserver/nurc/wms?LAYERS=nurc%3AArc_Sample&amp;STYLES=&amp;FORMAT=image%2Fjpeg&amp;TILED=true&amp;TILESORIGIN=-180%2C-90&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;SRS=EPSG%3A4326&amp;BBOX=-45,-45,0,0&amp;WIDTH=256&amp;HEIGHT=256</pre>
</div>
<p>You can then paste this URL into a curl request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v &quot;URL&quot;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v &quot;http://localhost:8090/geoserver/nurc/wms?LAYERS=nurc%3AArc_Sample&amp;STYLES=&amp;FORMAT=image%2Fjpeg&amp;TILED=true&amp;TILESORIGIN=-180%2C-90&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;SRS=EPSG%3A4326&amp;BBOX=-45,-45,0,0&amp;WIDTH=256&amp;HEIGHT=256&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To omit the raw image output to the terminal, pipe the output to your system&#8217;s null.  On Linux / OS X, append <tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">/dev/null</span></tt> to these requests, and on Windows, append <tt class="docutils literal"><span class="pre">&gt;</span> <span class="pre">nul</span></tt>.</p>
</div>
<p>If the request doesn&#8217;t go through GeoWebCache&#8217;s WMS, a reason will be given in a custom response header.  Look for the following response headers:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">geowebcache-cache-result</span></tt>:  Will say <tt class="docutils literal"><span class="pre">HIT</span></tt> if the GeoWebCache WMS processed the request, and <tt class="docutils literal"><span class="pre">MISS</span></tt> otherwise.</li>
<li><tt class="docutils literal"><span class="pre">geowebcache-miss-reason</span></tt>:  If the above shows as <tt class="docutils literal"><span class="pre">MISS</span></tt>, this will generated a short description of why the request wasn&#8217;t handled by the GeoWebCache WMS.</li>
</ul>
<p>The following are some example requests made along with the responses.  These responses have been truncated to show only the information relevant for troubleshooting.</p>
<div class="section" id="successful-request">
<h3>Successful request<a class="headerlink" href="#successful-request" title="Permalink to this headline">¶</a></h3>
<p>This request was successfully handled by the GeoWebCache WMS.</p>
<p>Request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v &quot;http://localhost:8080/geoserver/topp/wms?TILED=true&amp;LAYERS=states&amp;FORMAT=image/png&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG:4326&amp;BBOX=-135,45,-112.5,67.5&amp;WIDTH=256&amp;HEIGHT=256&quot;</span>
</pre></div>
</div>
<p>Response:</p>
<div class="highlight-python"><pre>&lt; HTTP/1.1 200 OK
&lt; Content-Type: image/png
&lt; geowebcache-crs: EPSG:4326
...
&lt; geowebcache-layer: topp:states
&lt; geowebcache-gridset: EPSG:4326
&lt; geowebcache-tile-index: [2, 6, 3]
...
&lt; geowebcache-cache-result: HIT
&lt; geowebcache-tile-bounds: -135.0,45.0,-112.5,67.5
...</pre>
</div>
</div>
<div class="section" id="wrong-height-parameter">
<h3>Wrong height parameter<a class="headerlink" href="#wrong-height-parameter" title="Permalink to this headline">¶</a></h3>
<p>The following request is not handled by the GeoWebCache WMS because the image requested (256x257) does not conform to the expected 256x256 tile size.</p>
<p>Request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v &quot;http://localhost:8080/geoserver/topp/wms?TILED=true&amp;LAYERS=states&amp;FORMAT=image/png&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG:4326&amp;BBOX=-135,45,-112.5,67.5&amp;WIDTH=256&amp;HEIGHT=257&quot;</span>
</pre></div>
</div>
<p>Response:</p>
<div class="highlight-python"><pre>&lt; HTTP/1.1 200 OK
&lt; Content-Type: image/png
&lt; geowebcache-miss-reason: request does not align to grid(s) 'EPSG:4326'
...</pre>
</div>
</div>
<div class="section" id="no-tile-layer-associated">
<h3>No tile layer associated<a class="headerlink" href="#no-tile-layer-associated" title="Permalink to this headline">¶</a></h3>
<p>The following request is not handled by the GeoWebCache WMS because the layer requested has no tile layer configured.</p>
<p>Request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v &quot;http://localhost:8080/geoserver/topp/wms?TILED=true&amp;LAYERS=tasmania_roads&amp;FORMAT=image/png&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG:4326&amp;BBOX=-135,45,-112.5,67.5&amp;WIDTH=256&amp;HEIGHT=256&quot;</span>
</pre></div>
</div>
<p>Response:</p>
<div class="highlight-python"><pre>&lt; HTTP/1.1 200 OK
&lt; Content-Type: image/png
&lt; geowebcache-miss-reason: not a tile layer
...</pre>
</div>
</div>
<div class="section" id="missing-parameter-filter">
<h3>Missing parameter filter<a class="headerlink" href="#missing-parameter-filter" title="Permalink to this headline">¶</a></h3>
<p>The following request is not handled by the GeoWebCache WMS because the request contains a parameter filter (BGCOLOR) that is not configured for this layer.</p>
<p>Request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v &quot;http://localhost:8080/geoserver/topp/wms?BGCOLOR=0xAAAAAA&amp;TILED=true&amp;LAYERS=states&amp;FORMAT=image/png&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG:4326&amp;BBOX=-135,45,-112.5,67.5&amp;WIDTH=256&amp;HEIGHT=256&quot;</span>
</pre></div>
</div>
<p>Response:</p>
<div class="highlight-python"><pre>&lt; HTTP/1.1 200 OK
&lt; Content-Type: image/png
&lt; geowebcache-miss-reason: no parameter filter exists for BGCOLOR
...</pre>
</div>
</div>
<div class="section" id="crs-not-defined">
<h3>CRS not defined<a class="headerlink" href="#crs-not-defined" title="Permalink to this headline">¶</a></h3>
<p>The following request is not handled by the GeoWebCache WMS because the request references a CRS (EPSG:26986) that does not match any of the tile layer gridsets:</p>
<p>Request:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v &quot;http://localhost:8080/geoserver/topp/wms?TILED=true&amp;LAYERS=states&amp;FORMAT=image/png&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG:26986&amp;BBOX=-135,45,-112.5,67.5&amp;WIDTH=256&amp;HEIGHT=256&quot;</span>
</pre></div>
</div>
<p>Response:</p>
<div class="highlight-python"><pre>&lt; HTTP/1.1 200 OK
&lt; Content-Type: image/png
&lt; geowebcache-miss-reason: no cache exists for requested CRS
...</pre>
</div>
</div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="rest/diskquota.html" title="previous chapter">Disk Quota</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="../googleearth/index.html" title="next chapter">Google Earth</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Troubleshooting</a><ul>
<li><a class="reference internal" href="#grid-misalignment">Grid misalignment</a></li>
<li><a class="reference internal" href="#direct-wms-integration">Direct WMS integration</a><ul>
<li><a class="reference internal" href="#successful-request">Successful request</a></li>
<li><a class="reference internal" href="#wrong-height-parameter">Wrong height parameter</a></li>
<li><a class="reference internal" href="#no-tile-layer-associated">No tile layer associated</a></li>
<li><a class="reference internal" href="#missing-parameter-filter">Missing parameter filter</a></li>
<li><a class="reference internal" href="#crs-not-defined">CRS not defined</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="rest/diskquota.html" title="previous chapter">Disk Quota</a></li>
            <li>Next: <a href="../googleearth/index.html" title="next chapter">Google Earth</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../_sources/geowebcache/troubleshooting.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>