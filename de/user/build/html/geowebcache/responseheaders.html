
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>HTTP Response Headers &mdash; GeoServer 2.2.x User Manual</title>
  <link rel="stylesheet" href="../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x User Manual" href="../index.html" />
      <link rel="up" title="Caching with GeoWebCache" href="index.html" />
      <link rel="next" title="GeoWebCache REST API" href="rest/index.html" />
      <link rel="prev" title="Seeding and refreshing" href="seeding.html" />
</head>
<body class="geowebcache/responseheaders">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../index.html">GeoServer 2.2.x User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoServer 2.2.x User Manual</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Caching with GeoWebCache</a> &raquo;</li>
  <li>HTTP Response Headers</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="rest/index.html" title="GeoWebCache REST API"
       accesskey="N">next</a></li>
  <li>
    <a href="seeding.html" title="Seeding and refreshing"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="http-response-headers">
<span id="gwc-responseheaders"></span><h1>HTTP Response Headers<a class="headerlink" href="#http-response-headers" title="Permalink to this headline">¶</a></h1>
<p>The GeoWebCache integrated with GeoServer employs special information stored in the header of responses.  These headers are available either with direct calls to the <a class="reference internal" href="using.html#gwc-endpoint"><em>GeoWebCache endpoint</em></a> or with <a class="reference internal" href="using.html#gwc-directwms"><em>direct WMS integration</em></a>.</p>
<div class="section" id="custom-response-headers">
<h2>Custom response headers<a class="headerlink" href="#custom-response-headers" title="Permalink to this headline">¶</a></h2>
<p>GeoWebCache returns both standard and custom HTTP response headers when serving a tile request.  This aids in the debugging process, as well as adhering to an HTTP 1.1 transfer control mechanism.</p>
<p>The response headers can be determined via a utility such as <a class="reference external" href="http://curl.haxx.se">cURL</a>.</p>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For all cURL commands below, make sure to replace <tt class="docutils literal"><span class="pre">&gt;/dev/null</span></tt> with <tt class="docutils literal"><span class="pre">&gt;nul</span></tt> if you are running on Windows.</p>
</div>
<p>This is a sample request and response using cURL:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v &quot;http://localhost:8080/geoserver/gwc/service/wms?LAYERS=sde%3Abmworld&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;SRS=EPSG%3A4326&amp;BBOX=-180,-38,-52,90&amp;WIDTH=256&amp;HEIGHT=256&amp;tiled=true&quot; &gt; /dev/null</span>
</pre></div>
</div>
<div class="highlight-python"><pre>&lt; HTTP/1.1 200 OK
&lt; geowebcache-tile-index: [0, 1, 2]
&lt; geowebcache-cache-result: HIT
&lt; geowebcache-tile-index: [0, 1, 2]
&lt; geowebcache-tile-bounds: -180.0,-38.0,-52.0,90.0
&lt; geowebcache-gridset: GlobalCRS84Pixel
&lt; geowebcache-crs: EPSG:4326
&lt; Content-Type: image/png
&lt; Content-Length: 102860
&lt; Server: Jetty(6.1.8)</pre>
</div>
<p>From this, one can learn that the tile was found in the cache (<tt class="docutils literal"><span class="pre">HIT</span></tt>), the requested tile was from the gridset called <tt class="docutils literal"><span class="pre">GlobalCRS84Pixel</span></tt> and had a CRS of <tt class="docutils literal"><span class="pre">EPSG:4326</span></tt>.</p>
</div>
<div class="section" id="list-of-custom-response-headers">
<h3>List of custom response headers<a class="headerlink" href="#list-of-custom-response-headers" title="Permalink to this headline">¶</a></h3>
<p>The following is the full list of custom response headers.  Whenever GeoWebCache serves a tile request, it will write some or all of the following custom headers on the HTTP response.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Response Header</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">geowebcache-cache-result</span></tt></td>
<td><p class="first">Shows whether the GeoWebCache WMS was used.  Options are:</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">HIT</span></tt>: Tile requested was found on the cache</li>
<li><tt class="docutils literal"><span class="pre">MISS</span></tt>: Tile was not found on the cache but was acquired from the layer&#8217;s data source</li>
<li><tt class="docutils literal"><span class="pre">WMS</span></tt>: Request was proxied directly to the origin WMS (for example, for GetFeatureInfo requests)</li>
<li><tt class="docutils literal"><span class="pre">OTHER</span></tt>: Response was the default white/transparent tile or an error occurred</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">geowebcache-tile-index</span></tt></td>
<td>Contains the three-dimensional tile index in x,y,z order of the returned tile image in the corresponding grid space (e.g. <tt class="docutils literal"><span class="pre">[1,</span> <span class="pre">0,</span> <span class="pre">0]</span></tt>)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">geowebcache-tile-bounds</span></tt></td>
<td>Bounds of the returned tile in the corresponding coordinate reference system (e.g. <tt class="docutils literal"><span class="pre">-180,-90,0,90</span></tt>)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">geowebcache-gridset</span></tt></td>
<td>Name of the gridset the tile belongs to (see <a class="reference internal" href="../webadmin/tilecache/gridsets.html#webadmin-tilecaching-gridsets"><em>Gridsets</em></a> for more information)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">geowebcache-crs</span></tt></td>
<td>Coordinate reference system code of the matching gridset (e.g. <tt class="docutils literal"><span class="pre">EPSG:900913</span></tt>, <tt class="docutils literal"><span class="pre">EPSG:4326</span></tt>, etc).</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="last-modified-and-if-modified-since">
<span id="gwc-lastmodifiedheaders"></span><h2>Last-Modified and If-Modified-Since<a class="headerlink" href="#last-modified-and-if-modified-since" title="Permalink to this headline">¶</a></h2>
<p>Well behaved HTTP 1.1 clients and server applications can make use of <tt class="docutils literal"><span class="pre">Last-Modified</span></tt> and <tt class="docutils literal"><span class="pre">If-Modified-Since</span></tt> HTTP control mechanisms to know when locally cached content is up to date, eliminating the need to download the same content again. This can result in considerable bandwidth savings.  (See HTTP 1.1 <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html">RFC 2616</a>, sections 14.29 and 14.25, for more information on these mechanisms.)</p>
<p>GeoWebCache will write a <tt class="docutils literal"><span class="pre">Last-Modified</span></tt> HTTP response header when serving a tile image.  The date is written as an RFC-1123 <tt class="docutils literal"><span class="pre">HTTP-Date</span></tt>:</p>
<div class="highlight-python"><pre>Last-Modified: Wed, 15 Nov 1995 04:58:08 GMT</pre>
</div>
<p>Clients connecting to GeoWebCache can create a &#8220;conditional GET&#8221; request with the <tt class="docutils literal"><span class="pre">If-Modified-Since</span></tt> request header.  If the tile wasn&#8217;t modified after the date specified in the <tt class="docutils literal"><span class="pre">Last-Modified</span></tt> response header, GeoWebCache will return a <tt class="docutils literal"><span class="pre">304</span></tt> status code indicating that the resource was available and not modified.</p>
<div class="section" id="id1">
<h3>Example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>A query for a specific tile returns the <tt class="docutils literal"><span class="pre">Last-Modified</span></tt> response header:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl -v &quot;http://localhost:8080/geoserver/gwc/service/wms?LAYERS=img%20states&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;EXCEPTIONS=application%2Fvnd.ogc.se_inimage&amp;SRS=EPSG%3A4326&amp;BBOX=-135,45,-90,90&amp;WIDTH=256&amp;HEIGHT=256&quot; &gt;/dev/null</span>
</pre></div>
</div>
<div class="highlight-python"><pre>&gt; Host: localhost:8080
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
...
&lt; Last-Modified: Wed, 25 Jul 2012 00:42:00 GMT
&lt; Content-Type: image/png
&lt; Content-Length: 31192</pre>
</div>
<p>This request has the <tt class="docutils literal"><span class="pre">If-Modified-Since</span></tt> header set to one second after what was returned by <tt class="docutils literal"><span class="pre">Last-Modified</span></tt>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl --header &quot;If-Modified-Since: Wed, 25 Jul 2012 00:42:01 GMT&quot; -v &quot;http://localhost:8080/geoserver/gwc/service/wms?LAYERS=img%20states&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;EXCEPTIONS=application%2Fvnd.ogc.se_inimage&amp;SRS=EPSG%3A4326&amp;BBOX=-135,45,-90,90&amp;WIDTH=256&amp;HEIGHT=256&quot; &gt;/dev/null</span>
</pre></div>
</div>
<div class="highlight-python"><pre>&gt; Host: localhost:8080
&gt; Accept: */*
&gt; If-Modified-Since: Wed, 25 Jul 2012 00:42:01 GMT
&gt;
&lt; HTTP/1.1 304 Not Modified
&lt; Last-Modified: Wed, 25 Jul 2012 00:42:00 GMT
&lt; Content-Type: image/png
&lt; Content-Length: 31192</pre>
</div>
<p>The response code is <tt class="docutils literal"><span class="pre">304</span></tt>. As the file hasn&#8217;t been modified since the time specified in the request, no content is actually transferred.  The client is informed that its copy of the tile is up to date.</p>
<p>However, if you were to set the <tt class="docutils literal"><span class="pre">If-Modified-Since</span></tt> header to <em>before</em> the time stored in <tt class="docutils literal"><span class="pre">Last-Modified</span></tt>, you will instead receive a <tt class="docutils literal"><span class="pre">200</span></tt> status code and the tile will be downloaded.</p>
<p>This example sets the <tt class="docutils literal"><span class="pre">If-Modified-Since</span></tt> header to one second before what was returned by <tt class="docutils literal"><span class="pre">Last-Modified</span></tt>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">curl --header &quot;If-Modified-Since: Wed, 25 Jul 2012 00:41:59 GMT&quot; -v &quot;http://localhost:8080/geoserver/gwc/service/wms?LAYERS=img%20states&amp;FORMAT=image%2Fpng&amp;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;STYLES=&amp;EXCEPTIONS=application%2Fvnd.ogc.se_inimage&amp;SRS=EPSG%3A4326&amp;BBOX=-135,45,-90,90&amp;WIDTH=256&amp;HEIGHT=256&quot; &gt;/dev/null</span>
</pre></div>
</div>
<div class="highlight-python"><pre>&gt; Host: localhost:8080
&gt; Accept: */*
&gt; If-Modified-Since: Wed, 25 Jul 2012 00:41:59 GMT
&gt;
&lt; HTTP/1.1 200 OK
...
&lt; Last-Modified: Wed, 25 Jul 2012 00:42:00 GMT
&lt; Content-Type: image/png
&lt; Content-Length: 31192</pre>
</div>
</div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="seeding.html" title="previous chapter">Seeding and refreshing</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="rest/index.html" title="next chapter">GeoWebCache REST API</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">HTTP Response Headers</a><ul>
<li><a class="reference internal" href="#custom-response-headers">Custom response headers</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#list-of-custom-response-headers">List of custom response headers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#last-modified-and-if-modified-since">Last-Modified and If-Modified-Since</a><ul>
<li><a class="reference internal" href="#id1">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="seeding.html" title="previous chapter">Seeding and refreshing</a></li>
            <li>Next: <a href="rest/index.html" title="next chapter">GeoWebCache REST API</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../_sources/geowebcache/responseheaders.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>