
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Service Security &mdash; GeoServer 2.2.x User Manual</title>
  <link rel="stylesheet" href="../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x User Manual" href="../index.html" />
      <link rel="up" title="Security" href="index.html" />
      <link rel="next" title="Layer security" href="layer.html" />
      <link rel="prev" title="Root account" href="root.html" />
</head>
<body class="security/service">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../index.html">GeoServer 2.2.x User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoServer 2.2.x User Manual</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Security</a> &raquo;</li>
  <li>Service Security</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="layer.html" title="Layer security"
       accesskey="N">next</a></li>
  <li>
    <a href="root.html" title="Root account"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="service-security">
<span id="sec-service"></span><h1>Service Security<a class="headerlink" href="#service-security" title="Permalink to this headline">¶</a></h1>
<p>GeoServer supports access control at the service level, allowing for the locking down of service operations to only authenticated users who have been granted a particular role. There are two main categories of services in GeoServer. The first is <a class="reference internal" href="../services/index.html#services"><em>OWS services</em></a> such as WMS and WFS. The second are RESTful services, such as <a class="reference internal" href="../restconfig/index.html#rest-extension"><em>RESTconfig</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Service-level security and <a class="reference internal" href="layer.html#sec-layer"><em>Layer security</em></a> cannot be combined. For example, it is not possible to specify access to a specific OWS service only for one specific layer.</p>
</div>
<div class="section" id="ows-services">
<h2>OWS services<a class="headerlink" href="#ows-services" title="Permalink to this headline">¶</a></h2>
<p>OWS services support setting security access constraints globally for a particular service, or to a specific operation within that service. A few examples include:</p>
<ul class="simple">
<li>Securing the entire WFS service so only authenticated users have access to all WFS operations.</li>
<li>Allowing anonymous access to read-only WFS operations such as GetCapabilities, but securing write operations such as Transaction.</li>
<li>Disabling the WFS service in effect by securing all operations and not applying the appropriate roles to any users.</li>
</ul>
<p>OWS service security access rules are specified in a file named <tt class="file docutils literal"><span class="pre">services.properties</span></tt>, located in the <tt class="docutils literal"><span class="pre">security</span></tt> directory in the GeoServer data directory. The file contains a list of rules that map service operations to defined roles. The syntax for specifying rules is as follows:</p>
<div class="highlight-python"><pre>&lt;service&gt;.&lt;operation|*&gt;=&lt;role&gt;[,&lt;role2&gt;,...]</pre>
</div>
<p>The parameters include:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">[]</span></tt>—Denotes optional parameters</li>
<li><tt class="docutils literal"><span class="pre">|</span></tt>—Denotes &#8220;or&#8221;</li>
<li><tt class="docutils literal"><span class="pre">service</span></tt>—Identifier of an OGC service, such as <tt class="docutils literal"><span class="pre">wfs</span></tt>, <tt class="docutils literal"><span class="pre">wms</span></tt>, or <tt class="docutils literal"><span class="pre">wcs</span></tt></li>
<li><tt class="docutils literal"><span class="pre">operation</span></tt>—Any operation supported by the service, examples include <tt class="docutils literal"><span class="pre">GetFeature</span></tt> for WFS, <tt class="docutils literal"><span class="pre">GetMap</span></tt> for WMS, <tt class="docutils literal"><span class="pre">*</span></tt> for all operations</li>
<li><tt class="docutils literal"><span class="pre">role[,role2,...]</span></tt>—List of predefined role names</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is important that roles specified are actually linked to a user, otherwise the whole service/operation will be accessible to no one except for the <a class="reference internal" href="root.html#sec-root"><em>Root account</em></a>. However in some cases this may be the desired effect.</p>
</div>
<p>The default service security configuration in GeoServer contains no rules and allows any anonymous user to access any operation of any service. The following are some examples of desired security restrictions and the corresponding rules.</p>
<div class="section" id="securing-the-entire-wfs-service">
<h3>Securing the entire WFS service<a class="headerlink" href="#securing-the-entire-wfs-service" title="Permalink to this headline">¶</a></h3>
<p>This rule grants access to any WFS operation only to authenticated users that have been granted the <tt class="docutils literal"><span class="pre">ROLE_WFS</span></tt> role:</p>
<div class="highlight-python"><pre>wfs.*=ROLE_WFS</pre>
</div>
</div>
<div class="section" id="anonymous-wfs-access-only-for-read-only-operations">
<h3>Anonymous WFS access only for read-only operations<a class="headerlink" href="#anonymous-wfs-access-only-for-read-only-operations" title="Permalink to this headline">¶</a></h3>
<p>This rule grants anonymous access to all WFS operations (such as GetCapabilities and GetFeature) but restricts Transaction requests to authenticated users that have been granted the <tt class="docutils literal"><span class="pre">ROLE_WFS_WRITE</span></tt> role:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">wfs</span><span class="o">.</span><span class="n">Transaction</span><span class="o">=</span><span class="n">ROLE_WFS_WRITE</span>
</pre></div>
</div>
</div>
<div class="section" id="securing-data-accessing-wfs-operations-and-write-operations">
<h3>Securing data-accessing WFS operations and write operations<a class="headerlink" href="#securing-data-accessing-wfs-operations-and-write-operations" title="Permalink to this headline">¶</a></h3>
<p>Used in conjunction, these two rules grant anonymous access to GetCapabilities and DescribeFeatureType, forcing the user to authenticate for the GetFeature operation (must be granted the <tt class="docutils literal"><span class="pre">ROLE_WFS_READ</span></tt> role), and to authenticate to perform transactions (must be granted the <tt class="docutils literal"><span class="pre">ROLE_WFS_WRITE</span></tt> role:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">wfs</span><span class="o">.</span><span class="n">GetFeature</span><span class="o">=</span><span class="n">ROLE_WFS_READ</span>
<span class="n">wfs</span><span class="o">.</span><span class="n">Transaction</span><span class="o">=</span><span class="n">ROLE_WFS_WRITE</span>
</pre></div>
</div>
<p>Note this example does not specify whether a user accessing Transactions would also have access to GetFeature.</p>
</div>
</div>
<div class="section" id="rest-services">
<h2>REST services<a class="headerlink" href="#rest-services" title="Permalink to this headline">¶</a></h2>
<p>In addition to providing the ability to secure OWS services, GeoServer also allows for the securing of RESTful services.</p>
<p>REST service security access rules are specified in a file named <tt class="file docutils literal"><span class="pre">rest.properties</span></tt>, located in the <tt class="docutils literal"><span class="pre">security</span></tt> directory of the GeoServer data directory. This file contains a list of rules mapping request URIs to defined roles. The rule syntax is as follows:</p>
<div class="highlight-python"><pre>&lt;uriPattern&gt;;&lt;method&gt;[,&lt;method&gt;,...]=&lt;role&gt;[,&lt;role&gt;,...]</pre>
</div>
<p>The parameters include:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">[]</span></tt>—Denote optional parameters</li>
<li><tt class="docutils literal"><span class="pre">uriPattern</span></tt>—The <a class="reference internal" href="#sec-service-ant-patterns"><em>ant pattern</em></a> that matches a set of request URIs</li>
<li><tt class="docutils literal"><span class="pre">method</span></tt>—HTTP request method, one of <tt class="docutils literal"><span class="pre">GET</span></tt>, <tt class="docutils literal"><span class="pre">POST</span></tt>, <tt class="docutils literal"><span class="pre">PUT</span></tt>, <tt class="docutils literal"><span class="pre">POST</span></tt>, <tt class="docutils literal"><span class="pre">DELETE</span></tt>, or <tt class="docutils literal"><span class="pre">HEAD</span></tt></li>
<li><tt class="docutils literal"><span class="pre">role</span></tt>—Name of a predefined role. The wildcard <tt class="docutils literal"><span class="pre">*</span></tt> is used to indicate all users, including anonymous users.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>URI patterns should account for the first component of the rest path, usually <tt class="docutils literal"><span class="pre">rest</span></tt> or <tt class="docutils literal"><span class="pre">api</span></tt></li>
<li><tt class="docutils literal"><span class="pre">method</span></tt> and <tt class="docutils literal"><span class="pre">role</span></tt> lists should <strong>not</strong> contain any spaces</li>
</ul>
</div>
<div class="section" id="ant-patterns">
<span id="sec-service-ant-patterns"></span><h3>Ant patterns<a class="headerlink" href="#ant-patterns" title="Permalink to this headline">¶</a></h3>
<p>Ant patterns are commonly used for pattern matching directory and file paths. The following examples  provide some basic instructions. The apache ant <a class="reference external" href="http://ant.apache.org/manual/dirtasks.html">user manual</a> contains more sophisticated use cases.</p>
<p>These examples are specific to <a class="reference internal" href="../restconfig/index.html#rest-extension"><em>RESTconfig</em></a>, but any RESTful GeoServer service could be configured in the same manner.</p>
</div>
<div class="section" id="disabling-anonymous-access-to-services">
<h3>Disabling anonymous access to services<a class="headerlink" href="#disabling-anonymous-access-to-services" title="Permalink to this headline">¶</a></h3>
<p>The most secure of configurations is one that forces any request, REST or otherwise, to be authenticated. The following will lock down access to all requests to users that are granted the <tt class="docutils literal"><span class="pre">ROLE_ADMINISTRATOR</span></tt> role:</p>
<div class="highlight-python"><pre>/**;GET,POST,PUT,DELETE=ROLE_ADMINISTRATOR</pre>
</div>
<p>A less restricting configuration locks down access to operations under the path <tt class="docutils literal"><span class="pre">/rest</span></tt> to users granted the <tt class="docutils literal"><span class="pre">ROLE_ADMINISTRATOR</span></tt> role, but will allow anonymous access to requests that fall under other paths (for example <tt class="docutils literal"><span class="pre">/api</span></tt>):</p>
<div class="highlight-python"><pre>/rest/**;GET,POST,PUT,DELETE=ROLE_ADMINISTRATOR</pre>
</div>
</div>
<div class="section" id="allowing-anonymous-read-only-access">
<h3>Allowing anonymous read-only access<a class="headerlink" href="#allowing-anonymous-read-only-access" title="Permalink to this headline">¶</a></h3>
<p>The following configuration grants anonymous access when the <tt class="docutils literal"><span class="pre">GET</span></tt> method is used, but forces authentication for a <tt class="docutils literal"><span class="pre">POST</span></tt>, <tt class="docutils literal"><span class="pre">PUT</span></tt>, or <tt class="docutils literal"><span class="pre">DELETE</span></tt> method:</p>
<div class="highlight-python"><pre>/**;GET=IS_AUTHENTICATED_ANONYMOUSLY
/**;POST,PUT,DELETE=TRUSTED_ROLE</pre>
</div>
</div>
<div class="section" id="securing-a-specific-resource">
<h3>Securing a specific resource<a class="headerlink" href="#securing-a-specific-resource" title="Permalink to this headline">¶</a></h3>
<p>The following configuration forces authentication for access to a particular resource (in this case the <tt class="docutils literal"><span class="pre">states</span></tt> feature type):</p>
<div class="highlight-python"><pre>/rest/**/states*;GET=TRUSTED_ROLE
/rest/**;POST,PUT,DELETE=TRUSTED_ROLE</pre>
</div>
<p>The following secures access to a set of resources (in this case all data stores).:</p>
<div class="highlight-python"><pre>/rest/**/datastores/*;GET=TRUSTED_ROLE
/rest/**/datastores/*.*;GET=TRUSTED_ROLE
/rest/**;POST,PUT,DELETE=TRUSTED_ROLE</pre>
</div>
<p>Note the trailing wildcards <tt class="docutils literal"><span class="pre">/*</span></tt> and <tt class="docutils literal"><span class="pre">/*.*</span></tt>.</p>
</div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="root.html" title="previous chapter">Root account</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="layer.html" title="next chapter">Layer security</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Service Security</a><ul>
<li><a class="reference internal" href="#ows-services">OWS services</a><ul>
<li><a class="reference internal" href="#securing-the-entire-wfs-service">Securing the entire WFS service</a></li>
<li><a class="reference internal" href="#anonymous-wfs-access-only-for-read-only-operations">Anonymous WFS access only for read-only operations</a></li>
<li><a class="reference internal" href="#securing-data-accessing-wfs-operations-and-write-operations">Securing data-accessing WFS operations and write operations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rest-services">REST services</a><ul>
<li><a class="reference internal" href="#ant-patterns">Ant patterns</a></li>
<li><a class="reference internal" href="#disabling-anonymous-access-to-services">Disabling anonymous access to services</a></li>
<li><a class="reference internal" href="#allowing-anonymous-read-only-access">Allowing anonymous read-only access</a></li>
<li><a class="reference internal" href="#securing-a-specific-resource">Securing a specific resource</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="root.html" title="previous chapter">Root account</a></li>
            <li>Next: <a href="layer.html" title="next chapter">Layer security</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../_sources/security/service.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>