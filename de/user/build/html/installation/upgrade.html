
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Upgrading &mdash; GeoServer 2.2.x User Manual</title>
  <link rel="stylesheet" href="../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.2.x',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
      <link rel="top" title="GeoServer 2.2.x User Manual" href="../index.html" />
      <link rel="up" title="Installation" href="index.html" />
      <link rel="next" title="Getting Started" href="../gettingstarted/index.html" />
      <link rel="prev" title="Web archive (WAR)" href="war.html" />
</head>
<body class="installation/upgrade">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../index.html">GeoServer 2.2.x User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/display/GEOS/What+is+Geoserver">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/display/GEOS/Download">Download</a></li>
        <li><a href="../index.html">Documentation</a></li>
      </ul>
        <form id="quick-search" action="../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoServer 2.2.x User Manual</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Installation</a> &raquo;</li>
  <li>Upgrading</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../gettingstarted/index.html" title="Getting Started"
       accesskey="N">next</a></li>
  <li>
    <a href="war.html" title="Web archive (WAR)"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="upgrading">
<span id="installation-upgrade"></span><h1>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h1>
<p>The general GeoServer upgrade process involves installing the new version on top
of the old and ensuring it points at the same data directory used by the
previous version. See <a class="reference internal" href="../datadirectory/migrating.html#migrating-data-directory"><em>Migrating a Data Directory between different versions</em></a> for more details.</p>
<p>This section contains details about upgrading to specific GeoServer versions.</p>
<div class="section" id="upgrade-to-2-2">
<h2>Upgrade to 2.2<a class="headerlink" href="#upgrade-to-2-2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="security-configuration">
<h3>Security configuration<a class="headerlink" href="#security-configuration" title="Permalink to this headline">¶</a></h3>
<p>GeoServer 2.2 comes with a significant retrofit of the <a class="reference internal" href="../security/index.html#security"><em>Security</em></a>
subsystem. The changes focus mostly on authentication and user management. On
upgrade GeoServer will update configuration in the <tt class="docutils literal"><span class="pre">security</span></tt> directory. The
specific changes are described <a class="reference internal" href="../datadirectory/migrating.html#migrating-data-directory-22x"><em>here</em></a>.</p>
</div>
<div class="section" id="obtaining-a-master-password">
<h3>Obtaining a master password<a class="headerlink" href="#obtaining-a-master-password" title="Permalink to this headline">¶</a></h3>
<p>Starting with Geoserver 2.2 a master password is needed. This password is used to log in as <tt class="docutils literal"><span class="pre">root</span></tt> user and to protect the Geoserver key store.</p>
<p>During the upgrade process, Geoserver tries to find a proper master password. The following rules apply</p>
<blockquote>
<div><ul class="simple">
<li>The default admin password <tt class="docutils literal"><span class="pre">geoserver</span></tt> is not allowed.</li>
<li>The minimal length of the password is 8 characters.</li>
</ul>
</div></blockquote>
<p>The algorithm for finding  a password:</p>
<ol class="arabic simple">
<li>Look for an existing user called <tt class="docutils literal"><span class="pre">admin</span></tt>. If there is such a user and the password obeys the rules above, use it.</li>
<li>Look for a user having the role <tt class="docutils literal"><span class="pre">ROLE_ADMINISTRATOR</span></tt>. If there is such a user and the password obeys the rules above, use it.</li>
<li>Generate a random password with 8 characters of length</li>
</ol>
<p>The algorithm stores a file <tt class="docutils literal"><span class="pre">masterpw.info</span></tt> into the <tt class="docutils literal"><span class="pre">security</span></tt> directory. If an existing password of a user is used, the content of this file is like</p>
<div class="highlight-python"><pre>This file was created at 2012/08/11 15:57:52

Master password is identical to the password of user: admin

Test the master password by logging in as user "root"

This file should be removed after reading !!!.</pre>
</div>
<p>If a master password was generated, the content is like</p>
<div class="highlight-python"><pre>This file was created at 2012/08/11 15:57:52

The generated master password is: pw?"9bWL

Test the master password by logging in as user "root"

This file should be removed after reading !!!.</pre>
</div>
<p>After reading this file, remember the master password and remove this file.</p>
</div>
<div class="section" id="restconfig-security-and-administrative-access">
<h3>RESTconfig security and administrative access<a class="headerlink" href="#restconfig-security-and-administrative-access" title="Permalink to this headline">¶</a></h3>
<p>The security changes also include a new type of access mode for layer level
security that allows for controlling administrative access to workspaces. In
this context administrative access includes access via the web admin ui, or
the RESTconfig api. For more details see <a class="reference internal" href="../security/layer.html#sec-layer"><em>Layer security</em></a>.</p>
<p>A side effect of this change can have consequences for RESTconfig api users. Previously access via REST was controlled by specifying constraints on url patterns as described <a class="reference internal" href="../security/rest.html#sec-rest"><em>here</em></a>. Administrative
workspace/layer security now adds a second level of access control. Therefore in order for a user to access resources via REST that user must also have sufficient administrative privileges.</p>
<p>By default administrative access for workspaces/layers is granted to the <tt class="docutils literal"><span class="pre">ROLE_ADMINISTRATOR</span></tt> role. So if REST security defines url level constraints that involve roles with lesser privileges, access to resources will be denied. The most common case of this is when users make the REST api accessible anonymously.</p>
<p>The solution to this problem is to reduce the administrative access role to that required by REST url security. In the case where access to the REST api is granted anonymously this is <strong>not recommended</strong>. Allowing a server to be administered anonymously is a huge security hole.</p>
</div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="war.html" title="previous chapter">Web archive (WAR)</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="../gettingstarted/index.html" title="next chapter">Getting Started</a></div>
      </div>
      </div><!-- /#content> -->
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Upgrading</a><ul>
<li><a class="reference internal" href="#upgrade-to-2-2">Upgrade to 2.2</a><ul>
<li><a class="reference internal" href="#security-configuration">Security configuration</a></li>
<li><a class="reference internal" href="#obtaining-a-master-password">Obtaining a master password</a></li>
<li><a class="reference internal" href="#restconfig-security-and-administrative-access">RESTconfig security and administrative access</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="war.html" title="previous chapter">Web archive (WAR)</a></li>
            <li>Next: <a href="../gettingstarted/index.html" title="next chapter">Getting Started</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../_sources/installation/upgrade.txt">Show Source</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright GeoServer.
    Last updated on Jan 04, 2013.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>